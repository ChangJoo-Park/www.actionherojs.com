<!DOCTYPE html><html><head><link rel="preload" href="/_next/009e820d-140a-423a-9a90-c778aadab04e/page/docs/ops/production-notes/index.js" as="script"/><link rel="preload" href="/_next/009e820d-140a-423a-9a90-c778aadab04e/page/_error/index.js" as="script"/><link rel="preload" href="/_next/517642acd6437ad7e589c92138f402c3/app.js" as="script"/><meta charset="utf-8" class="next-head"/><link rel="apple-touch-icon" sizes="57x57" href="/static/images/icons/apple-icon-57x57.png" class="next-head"/><link rel="apple-touch-icon" sizes="60x60" href="/static/images/icons/apple-icon-60x60.png" class="next-head"/><link rel="apple-touch-icon" sizes="72x72" href="/static/images/icons/apple-icon-72x72.png" class="next-head"/><link rel="apple-touch-icon" sizes="76x76" href="/static/images/icons/apple-icon-76x76.png" class="next-head"/><link rel="apple-touch-icon" sizes="114x114" href="/static/images/icons/apple-icon-114x114.png" class="next-head"/><link rel="apple-touch-icon" sizes="120x120" href="/static/images/icons/apple-icon-120x120.png" class="next-head"/><link rel="apple-touch-icon" sizes="144x144" href="/static/images/icons/apple-icon-144x144.png" class="next-head"/><link rel="apple-touch-icon" sizes="152x152" href="/static/images/icons/apple-icon-152x152.png" class="next-head"/><link rel="apple-touch-icon" sizes="180x180" href="/static/images/icons/apple-icon-180x180.png" class="next-head"/><link rel="icon" type="image/png" sizes="192x192" href="/static/images/icons/android-icon-192x192.png" class="next-head"/><link rel="icon" type="image/png" sizes="32x32" href="/static/images/icons/favicon-32x32.png" class="next-head"/><link rel="icon" type="image/png" sizes="96x96" href="/static/images/icons/favicon-96x96.png" class="next-head"/><link rel="icon" type="image/png" sizes="16x16" href="/static/images/icons/favicon-16x16.png" class="next-head"/><meta name="viewport" content="width=device-width" class="next-head"/><link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css" class="next-head"/><link rel="stylesheet" type="text/css" href="/static/css/bebasNeue.css" class="next-head"/><link rel="stylesheet" type="text/css" href="/static/css/animations.css" class="next-head"/><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800|Roboto:100,300,400,500,700,900" rel="stylesheet" class="next-head"/><title class="next-head">ActionHero</title><script src="/static/js/googleAnalytics.js" class="next-head"></script><link rel="stylesheet" href="https://unpkg.com/react-instantsearch-theme-algolia@4.0.0/style.min.css" class="next-head"/></head><body><div><div id="__next"><div data-reactroot="" data-reactid="1" data-react-checksum="-83319562"><div data-reactid="2"><!-- react-empty: 3 --><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300;" class="container-fluid" data-reactid="4"><header style="background-color:#2F5266;" data-reactid="5"><div class="container" data-reactid="6"><nav style="background-color:#2F5266;padding-top:5px;margin-bottom:10px;border:0;" class="navbar navbar-default" data-reactid="7"><div class="container" data-reactid="8"><div class="navbar-header" data-reactid="9"><a style="padding-top:0;margin-bottom:15px;" class="navbar-brand" data-reactid="10"><img src="/static/images/actionhero-logo-header-wordmark.svg" style="padding-top:14px;padding-bottom:20px;" data-reactid="11"/></a><button type="button" class="navbar-toggle collapsed" data-reactid="12"><span class="sr-only" data-reactid="13">Toggle navigation</span><span class="icon-bar" data-reactid="14"></span><span class="icon-bar" data-reactid="15"></span><span class="icon-bar" data-reactid="16"></span></button></div><div class="navbar-collapse collapse" data-reactid="17"><ul class="nav navbar-nav navbar-right" data-reactid="18"></ul><ul class="hidden-md hidden-sm hidden-xs nav navbar-nav navbar-left" data-reactid="19"><li role="presentation" class="" data-reactid="20"><a role="button" href="#" data-reactid="21"> </a></li><li role="presentation" class="" data-reactid="22"><a role="button" href="#" data-reactid="23"> </a></li><li role="presentation" class="" data-reactid="24"><a role="button" href="#" data-reactid="25"> </a></li><li role="presentation" class="" data-reactid="26"><a role="button" href="#" data-reactid="27"> </a></li></ul><ul class="nav navbar-nav navbar-left" data-reactid="28"><li role="presentation" class="" data-reactid="29"><a role="button" href="#" data-reactid="30"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;" data-reactid="31">Downloads</span></a></li><li role="presentation" class="" data-reactid="32"><a role="button" href="#" data-reactid="33"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;" data-reactid="34">Documentation</span></a></li><li role="presentation" class="hidden-sm" data-reactid="35"><a role="button" href="#" data-reactid="36"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;" data-reactid="37">Solutions</span></a></li><li role="presentation" class="" data-reactid="38"><a role="button" href="#" data-reactid="39"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;" data-reactid="40">Community</span></a></li></ul><ul class="nav navbar-nav navbar-right" data-reactid="41"><div data-reactid="42"><a style="text-decoration:none;" href="/get-started/" data-reactid="43"><button style="font-family:Roboto, sans-serif;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#6E8898;border-color:#6E8898;font-weight:300;margin-top:20px;margin-bottom:0;margin-left:10px;margin-right:10px;outline:none;" type="button" class="btn btn-lg btn-default btn-block" data-reactid="44">Get Started</button></a></div></ul></div></div></nav></div></header></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300;" class="container-fluid" data-reactid="45"><div style="background-color:#FBF9E4;color:#2F5266;font-weight:200;padding:50px;" data-reactid="46"><div class="container" data-reactid="47"><div class="row" data-reactid="48"><div style="text-align:center;" class="col-md-3" data-reactid="49"><img src="/static/images/ops-tools.svg" data-reactid="50"/></div><div style="text-align:center;" class="col-md-6" data-reactid="51"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px;" data-reactid="52"><br data-reactid="53"/><!-- react-text: 54 -->Operations: Production Notes<!-- /react-text --></h1></div><div class="col-md-3" data-reactid="55"></div></div></div></div><div style="height:183px;background:url(&quot;/static/images/clouds-white.svg&quot;) no-repeat center #FBF9E4;" data-reactid="56"></div><div style="padding-bottom:100px;" class="container" data-reactid="57"><div class="row" data-reactid="58"><div id="_top" data-reactid="59"></div><div id="docPageContent" class="col-md-9" data-reactid="60"><div class="row" data-reactid="61"><div class="col-md-12" data-reactid="62"><div data-reactid="63"><br data-reactid="64"/><h2 id="topology" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="65"><span style="font-weight:300;font-size:36px;" data-reactid="66">Topology Example</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="67"/><div style="font-family:Open Sans, sans-serif;" data-reactid="68"><div data-reactid="69"><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="70"><code data-reactid="71"><span style="color:#998;font-style:italic;" data-reactid="72"><!-- react-text: 73 -->// Assume we use the flag `process.env.ACTIONHERO_ROLE` to denote the type of server<!-- /react-text --></span><!-- react-text: 74 -->
<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="75"><!-- react-text: 76 -->// You can set this variable in the ENV of your server or launch each process with the flag:<!-- /react-text --></span><!-- react-text: 77 -->
<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="78"><!-- react-text: 79 -->// Worker =&gt; `ACTIONHERO_ROLE=&#x27;worker&#x27; npm start`<!-- /react-text --></span><!-- react-text: 80 -->
<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="81"><!-- react-text: 82 -->// Server =&gt; `ACTIONHERO_ROLE=&#x27;server&#x27; npm start`<!-- /react-text --></span><!-- react-text: 83 -->

<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="84"><!-- react-text: 85 -->// config/tasks.js<!-- /react-text --></span><!-- react-text: 86 -->

exports.production = {
    <!-- /react-text --><span data-reactid="87"><!-- react-text: 88 -->tasks<!-- /react-text --></span><!-- react-text: 89 -->: <!-- /react-text --><span data-reactid="90"><span style="color:#333;font-weight:bold;" data-reactid="91"><!-- react-text: 92 -->function<!-- /react-text --></span><!-- react-text: 93 -->(<!-- /react-text --><span data-reactid="94"><!-- react-text: 95 -->api<!-- /react-text --></span><!-- react-text: 96 -->)<!-- /react-text --></span><!-- react-text: 97 -->{

        <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="98"><!-- react-text: 99 -->// default to config for &#x27;server&#x27;<!-- /react-text --></span><!-- react-text: 100 -->
        <!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="101"><!-- react-text: 102 -->var<!-- /react-text --></span><!-- react-text: 103 --> config = {
          <!-- /react-text --><span data-reactid="104"><!-- react-text: 105 -->scheduler<!-- /react-text --></span><!-- react-text: 106 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="107"><!-- react-text: 108 -->false<!-- /react-text --></span><!-- react-text: 109 -->,
          <!-- /react-text --><span data-reactid="110"><!-- react-text: 111 -->queues<!-- /react-text --></span><!-- react-text: 112 -->: [<!-- /react-text --><span style="color:#d14;" data-reactid="113"><!-- react-text: 114 -->&#x27;*&#x27;<!-- /react-text --></span><!-- react-text: 115 -->],
          <!-- /react-text --><span data-reactid="116"><!-- react-text: 117 -->verbose<!-- /react-text --></span><!-- react-text: 118 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="119"><!-- react-text: 120 -->true<!-- /react-text --></span><!-- react-text: 121 -->,
          <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="122"><!-- react-text: 123 -->// ...<!-- /react-text --></span><!-- react-text: 124 -->
        };

        <!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="125"><!-- react-text: 126 -->if<!-- /react-text --></span><!-- react-text: 127 -->(process.env.ACTIONHERO_ROLE === <!-- /react-text --><span style="color:#d14;" data-reactid="128"><!-- react-text: 129 -->&#x27;worker&#x27;<!-- /react-text --></span><!-- react-text: 130 -->){
            config.scheduler = <!-- /react-text --><span style="color:#008080;" data-reactid="131"><!-- react-text: 132 -->true<!-- /react-text --></span><!-- react-text: 133 -->;
            config.minTaskProcessors = <!-- /react-text --><span style="color:#008080;" data-reactid="134"><!-- react-text: 135 -->1<!-- /react-text --></span><!-- react-text: 136 -->;
            config.maxTaskProcessors = <!-- /react-text --><span style="color:#008080;" data-reactid="137"><!-- react-text: 138 -->10<!-- /react-text --></span><!-- react-text: 139 -->;
        }

        <!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="140"><!-- react-text: 141 -->return<!-- /react-text --></span><!-- react-text: 142 --> config;
    }
};

<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="143"><!-- react-text: 144 -->// config/servers/web.js<!-- /react-text --></span><!-- react-text: 145 -->

exports.default = {
    <!-- /react-text --><span data-reactid="146"><!-- react-text: 147 -->servers<!-- /react-text --></span><!-- react-text: 148 -->: {
        <!-- /react-text --><span data-reactid="149"><!-- react-text: 150 -->web<!-- /react-text --></span><!-- react-text: 151 -->: <!-- /react-text --><span data-reactid="152"><span style="color:#333;font-weight:bold;" data-reactid="153"><!-- react-text: 154 -->function<!-- /react-text --></span><!-- react-text: 155 -->(<!-- /react-text --><span data-reactid="156"><!-- react-text: 157 -->api<!-- /react-text --></span><!-- react-text: 158 -->)<!-- /react-text --></span><!-- react-text: 159 -->{
            config = {
                <!-- /react-text --><span data-reactid="160"><!-- react-text: 161 -->enabled<!-- /react-text --></span><!-- react-text: 162 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="163"><!-- react-text: 164 -->true<!-- /react-text --></span><!-- react-text: 165 -->,
                <!-- /react-text --><span data-reactid="166"><!-- react-text: 167 -->secure<!-- /react-text --></span><!-- react-text: 168 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="169"><!-- react-text: 170 -->false<!-- /react-text --></span><!-- react-text: 171 -->,
                <!-- /react-text --><span data-reactid="172"><!-- react-text: 173 -->serverOptions<!-- /react-text --></span><!-- react-text: 174 -->: {},
                <!-- /react-text --><span data-reactid="175"><!-- react-text: 176 -->port<!-- /react-text --></span><!-- react-text: 177 -->: process.env.PORT || <!-- /react-text --><span style="color:#008080;" data-reactid="178"><!-- react-text: 179 -->8080<!-- /react-text --></span><!-- react-text: 180 -->
                <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="181"><!-- react-text: 182 -->// ...<!-- /react-text --></span><!-- react-text: 183 -->
            };

            <!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="184"><!-- react-text: 185 -->if<!-- /react-text --></span><!-- react-text: 186 -->(process.env.ACTIONHERO_ROLE === <!-- /react-text --><span style="color:#d14;" data-reactid="187"><!-- react-text: 188 -->&#x27;worker&#x27;<!-- /react-text --></span><!-- react-text: 189 -->){
                config.enabled = <!-- /react-text --><span style="color:#008080;" data-reactid="190"><!-- react-text: 191 -->false<!-- /react-text --></span><!-- react-text: 192 -->;
            }

            <!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="193"><!-- react-text: 194 -->return<!-- /react-text --></span><!-- react-text: 195 --> config;
        }
    }
};
<!-- /react-text --></code></pre><p data-reactid="196">Here is a common ActionHero production topology:</p><img src="/static/images/cluster.png" data-reactid="197"/><p data-reactid="198">Notes:</p><ul data-reactid="199"><li data-reactid="200"><!-- react-text: 201 -->It&#x27;s best to seperate the &quot;workers&quot; from the web &quot;servers&quot;<!-- /react-text --><ul data-reactid="202"><li data-reactid="203">be sure to modify the config files for each type of server accordingly (ie: turn of all servers for the workers, and turn of all workers on the servers)</li></ul></li><li data-reactid="204">To accomplish the above, you only need to make changes to your configuration files on each server.  You will still be running the same same ActionHero project codebase.  See the example:</li><li data-reactid="205">Always have a replica of redis!</li></ul></div></div></div><div data-reactid="206"><br data-reactid="207"/><h2 id="paths" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="208"><span style="font-weight:300;font-size:36px;" data-reactid="209">Paths and Environments</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="210"/><div style="font-family:Open Sans, sans-serif;" data-reactid="211"><div data-reactid="212"><p data-reactid="213">You can set a few environment variables to affect how ActionHero runs:</p><ul data-reactid="214"><li data-reactid="215"><code data-reactid="216">PROJECT_ROOT</code><!-- react-text: 217 -->: This is useful when deploying ActionHero applications on a server where symlinks will change under a running process.  The cluster will look at your symlink <!-- /react-text --><code data-reactid="218">PROJECT_ROOT=/path/to/current_symlink</code><!-- react-text: 219 --> rather than the absolute path it was started from<!-- /react-text --></li><li data-reactid="220"><code data-reactid="221">ACTIONHERO_ROOT</code><!-- react-text: 222 -->: This can used to set the absolute path to the ActionHero binaries<!-- /react-text --></li><li data-reactid="223"><code data-reactid="224">ACTIONHERO_CONFIG</code><!-- react-text: 225 -->: This can be user to set the absolute path to the ActionHero config directory you wish to use.  This is useful when you might have a variable configs per server<!-- /react-text --></li><li data-reactid="226"><code data-reactid="227">ACTIONHERO_TITLE</code><!-- react-text: 228 -->: The value of <!-- /react-text --><code data-reactid="229">api.id</code><!-- react-text: 230 -->, and the name for the pidfile in some boot configurations<!-- /react-text --></li></ul></div></div></div><div data-reactid="231"><br data-reactid="232"/><h2 id="daemon" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="233"><span style="font-weight:300;font-size:36px;" data-reactid="234">Daemon</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="235"/><div style="font-family:Open Sans, sans-serif;" data-reactid="236"><div data-reactid="237"><p data-reactid="238">When deploying ActionHero, you will probably have more than 1 process.  You can use the cluster manager to keep an eye on the workers and manage them</p><ul data-reactid="239"><li data-reactid="240"><!-- react-text: 241 -->Start the cluster with 2 workers: <!-- /react-text --><code data-reactid="242">./node_modules/.bin/actionhero start cluster --workers=2</code></li></ul><p data-reactid="243"><!-- react-text: 244 -->When deploying new code, you can gracefully restart your workers by sending the <!-- /react-text --><code data-reactid="245">USR2</code><!-- react-text: 246 --> signal to the cluster manager to signal a reload to all workers.  You don&#x27;t need to start and stop the cluster-master.  This allows for 0-downtime deployments.<!-- /react-text --></p><p data-reactid="247">You may want to set some of the ENV variables above to help with your deployment.</p></div></div></div><div data-reactid="248"><br data-reactid="249"/><h2 id="number-of-workers" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="250"><span style="font-weight:300;font-size:36px;" data-reactid="251">Number of Workers</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="252"/><div style="font-family:Open Sans, sans-serif;" data-reactid="253"><div data-reactid="254"><p data-reactid="255"><!-- react-text: 256 -->When choosing the number of workers (<!-- /react-text --><code data-reactid="257">--workers=n</code><!-- react-text: 258 -->) for your ActionHero cluster, choose at least 1 less than the number of CPUs available.  If you have a &quot;burstable&quot; architecture (like a Joyent smart machine), opt for the highest number of &#x27;consistent&#x27; CPUs you can have, meaning a number of CPUs that you will always have available to you.<!-- /react-text --></p><p data-reactid="259">You never want more workers than you can run at a time, or else you will actually be slowing down the execution of all processes.</p><p data-reactid="260">Of course, not going in to swap memory is more important than utilizing all of your CPUs, so if you find yourself running out of ram, reduce the number of workers!</p></div></div></div><div data-reactid="261"><br data-reactid="262"/><h2 id="pidfiles" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="263"><span style="font-weight:300;font-size:36px;" data-reactid="264">Pidfiles</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="265"/><div style="font-family:Open Sans, sans-serif;" data-reactid="266"><div data-reactid="267"><p data-reactid="268"><!-- react-text: 269 -->ActionHero will write its pid to a pidfile in the normal unix way.  The path for the pidfile is set in <!-- /react-text --><code data-reactid="270">config/api.js</code><!-- react-text: 271 --> with <!-- /react-text --><code data-reactid="272">config.general.paths.pid</code><!-- react-text: 273 -->.<!-- /react-text --></p><p data-reactid="274"><!-- react-text: 275 -->Individual ActionHero servers will name their pidfiles by <!-- /react-text --><code data-reactid="276">api.id</code><!-- react-text: 277 -->, which is determined by the logic <!-- /react-text --><a href="https://github.com/actionhero/actionhero/blob/master/initializers/pids.js" data-reactid="278">here</a><!-- react-text: 279 --> and <!-- /react-text --><a href="https://github.com/actionhero/actionhero/blob/master/initializers/id.js" data-reactid="280">here</a><!-- react-text: 281 -->.  For example, on my laptop with the IP address of <!-- /react-text --><code data-reactid="282">192.168.0.1</code><!-- react-text: 283 -->, running <!-- /react-text --><code data-reactid="284">npm start</code><!-- react-text: 285 --> would run one ActionHero server and generate a pidfile of <!-- /react-text --><code data-reactid="286">./pids/actionhero-192.168.0.1</code><!-- react-text: 287 --> in which would be a single line containg the process&#x27; pid.<!-- /react-text --></p><p data-reactid="288"><!-- react-text: 289 -->When running the cluster, the cluster process first writes his own pidfile to <!-- /react-text --><code data-reactid="290">process.cwd() + &#x27;./pids/cluster_pidfile&#x27;</code><!-- react-text: 291 -->.  Then, every worker the cluster master creates will have a pid like <!-- /react-text --><code data-reactid="292">actionhero-worker-1</code><!-- react-text: 293 --> in the location defined by <!-- /react-text --><code data-reactid="294">config/api.js</code><!-- react-text: 295 -->.<!-- /react-text --></p></div></div></div><div data-reactid="296"><br data-reactid="297"/><h2 id="git" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="298"><span style="font-weight:300;font-size:36px;" data-reactid="299">Git-Based Deployment</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="300"/><div style="font-family:Open Sans, sans-serif;" data-reactid="301"><div data-reactid="302"><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="303"><code data-reactid="304"><span style="color:#999;font-weight:bold;" data-reactid="305"><!-- react-text: 306 -->#!/usr/bin/env bash<!-- /react-text --></span><!-- react-text: 307 -->
<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="308"><!-- react-text: 309 --># assuming the ActionHero cluster master process is already running<!-- /react-text --></span><!-- react-text: 310 -->

DEPLOY_PATH=/path/to/your/application

<!-- /react-text --><span style="color:#0086b3;" data-reactid="311"><!-- react-text: 312 -->cd<!-- /react-text --></span><!-- react-text: 313 --> <!-- /react-text --><span style="color:#008080;" data-reactid="314"><!-- react-text: 315 -->$DEPLOY_PATH<!-- /react-text --></span><!-- react-text: 316 --> &amp;&amp; git pull
<!-- /react-text --><span style="color:#0086b3;" data-reactid="317"><!-- react-text: 318 -->cd<!-- /react-text --></span><!-- react-text: 319 --> <!-- /react-text --><span style="color:#008080;" data-reactid="320"><!-- react-text: 321 -->$DEPLOY_PATH<!-- /react-text --></span><!-- react-text: 322 --> &amp;&amp; npm install
<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="323"><!-- react-text: 324 --># run any build tasks here, like perhaps an asset compile step or a database migration<!-- /react-text --></span><!-- react-text: 325 -->
<!-- /react-text --><span style="color:#0086b3;" data-reactid="326"><!-- react-text: 327 -->cd<!-- /react-text --></span><!-- react-text: 328 --> <!-- /react-text --><span style="color:#008080;" data-reactid="329"><!-- react-text: 330 -->$DEPLOY_PATH<!-- /react-text --></span><!-- react-text: 331 --> &amp;&amp; <!-- /react-text --><span style="color:#0086b3;" data-reactid="332"><!-- react-text: 333 -->kill<!-- /react-text --></span><!-- react-text: 334 --> -s USR2 `cat pids/cluster_pidfile`<!-- /react-text --></code></pre><p data-reactid="335"><!-- react-text: 336 -->To send a signal to the cluster master process to reboot all its workers (<!-- /react-text --><code data-reactid="337">USR2</code><!-- react-text: 338 -->), you can cat the pidfile (bash): <!-- /react-text --><code data-reactid="339">kill -s USR2 &quot;cat /path/to/pids/cluster_pidfile&quot;</code></p><p data-reactid="340">If you want to setup a git-based deployment, the simplest steps would be something like =&gt;</p></div></div></div><div data-reactid="341"><br data-reactid="342"/><h2 id="procfile" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="343"><span style="font-weight:300;font-size:36px;" data-reactid="344">PAAS and Procfile Deployment</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="345"/><div style="font-family:Open Sans, sans-serif;" data-reactid="346"><div data-reactid="347"><p data-reactid="348"><!-- react-text: 349 -->When deploying to a Platform as a Service (PAAS) cluster (like <!-- /react-text --><a href="https://heroku.com" data-reactid="350">Heroku</a><!-- react-text: 351 -->, <!-- /react-text --><a href="https://flynn.io" data-reactid="352">Flynn</a><!-- react-text: 353 -->, and even some <!-- /react-text --><a href="https://www.docker.com" data-reactid="354">Docker</a><!-- react-text: 355 --> deployments), we can offer a few pieces of advice.<!-- /react-text --></p><p data-reactid="356"><!-- react-text: 357 -->If you are deploying a seperate WEB and WORKER process type, you can define them in a <!-- /react-text --><a href="https://devcenter.heroku.com/articles/procfile" data-reactid="358"><code data-reactid="359">Procfile</code></a><!-- react-text: 360 --> and make use of environment variable overrides in addition to those defined from the environemnt.  You can modify your config files to use these options:<!-- /react-text --></p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="361"><code data-reactid="362"><!-- react-text: 363 --># ./Procfile
web:    SCHEDULER=<!-- /react-text --><span style="color:#008080;" data-reactid="364"><!-- react-text: 365 -->false<!-- /react-text --></span><!-- react-text: 366 --> \
        MIN_TASK_PROCESSORS=<!-- /react-text --><span style="color:#008080;" data-reactid="367"><!-- react-text: 368 -->0<!-- /react-text --></span><!-- react-text: 369 --> \
        MAX_TASK_PROCESSORS=<!-- /react-text --><span style="color:#008080;" data-reactid="370"><!-- react-text: 371 -->0<!-- /react-text --></span><!-- react-text: 372 --> \
        ENABLE_WEB_SERVER=<!-- /react-text --><span style="color:#008080;" data-reactid="373"><!-- react-text: 374 -->true<!-- /react-text --></span><!-- react-text: 375 -->  \
        ENABLE_TCP_SERVER=<!-- /react-text --><span style="color:#008080;" data-reactid="376"><!-- react-text: 377 -->true<!-- /react-text --></span><!-- react-text: 378 -->  \
        ENABLE_WEBSOCKET_SERVER=<!-- /react-text --><span style="color:#008080;" data-reactid="379"><!-- react-text: 380 -->true<!-- /react-text --></span><!-- react-text: 381 -->  \
        ./node_modules/.bin/actionhero start

worker: SCHEDULER=<!-- /react-text --><span style="color:#008080;" data-reactid="382"><!-- react-text: 383 -->true<!-- /react-text --></span><!-- react-text: 384 -->  \
        MIN_TASK_PROCESSORS=<!-- /react-text --><span style="color:#008080;" data-reactid="385"><!-- react-text: 386 -->5<!-- /react-text --></span><!-- react-text: 387 --> \
        MAX_TASK_PROCESSORS=<!-- /react-text --><span style="color:#008080;" data-reactid="388"><!-- react-text: 389 -->5<!-- /react-text --></span><!-- react-text: 390 --> \
        ENABLE_WEB_SERVER=<!-- /react-text --><span style="color:#008080;" data-reactid="391"><!-- react-text: 392 -->false<!-- /react-text --></span><!-- react-text: 393 --> \
        ENABLE_TCP_SERVER=<!-- /react-text --><span style="color:#008080;" data-reactid="394"><!-- react-text: 395 -->false<!-- /react-text --></span><!-- react-text: 396 --> \
        ENABLE_WEBSOCKET_SERVER=<!-- /react-text --><span style="color:#008080;" data-reactid="397"><!-- react-text: 398 -->false<!-- /react-text --></span><!-- react-text: 399 --> \
        ./node_modules/.bin/actionhero start
<!-- /react-text --></code></pre><p data-reactid="400"><!-- react-text: 401 -->Be sure <!-- /react-text --><strong data-reactid="402">not</strong><!-- react-text: 403 --> to use NPM in your <!-- /react-text --><code data-reactid="404">Procfile</code><!-- react-text: 405 --> defintions.  In many deployment scenarios, NPM will not properly pass signals to the ActionHero process and it will be impossible to signal a graceful shutdown.  Examples of this behavior can be found <!-- /react-text --><a href="https://github.com/flynn/flynn/issues/3601" data-reactid="406">here</a><!-- react-text: 407 --> and <!-- /react-text --><a href="https://github.com/npm/npm/issues/4603" data-reactid="408">here</a></p></div></div></div><div data-reactid="409"><br data-reactid="410"/><h2 id="global-packages" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="411"><span style="font-weight:300;font-size:36px;" data-reactid="412">Global Packages</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="413"/><div style="font-family:Open Sans, sans-serif;" data-reactid="414"><div data-reactid="415"><p data-reactid="416"><!-- react-text: 417 -->It&#x27;s probably best to avoid installing any global packages.  This way, you won&#x27;t have to worry about conflicts, and your project can be kept up to date more easily.  When using npm to install a local package the package&#x27;s binaries are always copied into <!-- /react-text --><code data-reactid="418">./node_modules/.bin</code><!-- react-text: 419 -->.<!-- /react-text --></p><p data-reactid="420">You can add local references to your $PATH like so to use these local binaries:</p><p data-reactid="421"><code data-reactid="422">export PATH=$PATH:node_modules/.bin</code></p></div></div></div><div data-reactid="423"><br data-reactid="424"/><h2 id="nginx" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="425"><span style="font-weight:300;font-size:36px;" data-reactid="426">Nginx Example</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="427"/><div style="font-family:Open Sans, sans-serif;" data-reactid="428"><div data-reactid="429"><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="430"><code data-reactid="431"><span style="color:#998;font-style:italic;" data-reactid="432"><!-- react-text: 433 -->// From `config/servers/web.js`<!-- /react-text --></span><!-- react-text: 434 -->

exports.production = {
  <!-- /react-text --><span data-reactid="435"><!-- react-text: 436 -->servers<!-- /react-text --></span><!-- react-text: 437 -->: {
    <!-- /react-text --><span data-reactid="438"><!-- react-text: 439 -->web<!-- /react-text --></span><!-- react-text: 440 -->: <!-- /react-text --><span data-reactid="441"><span style="color:#333;font-weight:bold;" data-reactid="442"><!-- react-text: 443 -->function<!-- /react-text --></span><!-- react-text: 444 -->(<!-- /react-text --><span data-reactid="445"><!-- react-text: 446 -->api<!-- /react-text --></span><!-- react-text: 447 -->)<!-- /react-text --></span><!-- react-text: 448 -->{
      <!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="449"><!-- react-text: 450 -->return<!-- /react-text --></span><!-- react-text: 451 --> {
        <!-- /react-text --><span data-reactid="452"><!-- react-text: 453 -->port<!-- /react-text --></span><!-- react-text: 454 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="455"><!-- react-text: 456 -->&#x27;/home/USER/www/APP/current/tmp/sockets/actionhero.sock&#x27;<!-- /react-text --></span><!-- react-text: 457 -->,
        <!-- /react-text --><span data-reactid="458"><!-- react-text: 459 -->bindIP<!-- /react-text --></span><!-- react-text: 460 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="461"><!-- react-text: 462 -->null<!-- /react-text --></span><!-- react-text: 463 -->,
        <!-- /react-text --><span data-reactid="464"><!-- react-text: 465 -->metadataOptions<!-- /react-text --></span><!-- react-text: 466 -->: {
          <!-- /react-text --><span data-reactid="467"><!-- react-text: 468 -->serverInformation<!-- /react-text --></span><!-- react-text: 469 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="470"><!-- react-text: 471 -->false<!-- /react-text --></span><!-- react-text: 472 -->,
          <!-- /react-text --><span data-reactid="473"><!-- react-text: 474 -->requesterInformation<!-- /react-text --></span><!-- react-text: 475 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="476"><!-- react-text: 477 -->false<!-- /react-text --></span><!-- react-text: 478 -->
        }
      }
    }
  }
}
<!-- /react-text --></code></pre><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="479"><code data-reactid="480"><span style="color:#998;font-style:italic;" data-reactid="481"><!-- react-text: 482 --># The nginx.conf:<!-- /react-text --></span><!-- react-text: 483 -->

<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="484"><!-- react-text: 485 -->#user  nobody;<!-- /react-text --></span><!-- react-text: 486 -->
worker_processes  4;

error_log  /var/<!-- /react-text --><span style="color:#0086b3;" data-reactid="487"><!-- react-text: 488 -->log<!-- /react-text --></span><!-- react-text: 489 -->/nginx/error.log warn;
pid        /var/run/nginx.pid;


events {
  worker_connections 1024;
  accept_mutex on;
}


http {
    include       mime.types;
    default_type  application/octet-stream;
    server_tokens off;
    sendfile        on;
    keepalive_timeout  65;

    set_real_ip_from  X.X.X.X/24;
    real_ip_header    X-Forwarded-For;

    gzip on;
    gzip_http_version 1.0;
    gzip_comp_level 9;
    gzip_proxied any;
    gzip_types text/plain text/xml text/css text/comma-separated-values text/javascript application/x-javascript font/ttf font/otf image/svg+xml application/atom+xml;

    log_format  main  <!-- /react-text --><span style="color:#d14;" data-reactid="490"><!-- react-text: 491 -->&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; $status $body_bytes_sent &quot;$http_referer&quot; &quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot; $request_time&#x27;<!-- /react-text --></span><!-- react-text: 492 -->;

    server {
        proxy_set_header X-Forwarded-For <!-- /react-text --><span style="color:#008080;" data-reactid="493"><!-- react-text: 494 -->$proxy_add_x_forwarded_for<!-- /react-text --></span><!-- react-text: 495 -->;
        proxy_set_header Host <!-- /react-text --><span style="color:#008080;" data-reactid="496"><!-- react-text: 497 -->$http_host<!-- /react-text --></span><!-- react-text: 498 -->;
        proxy_set_header X_FORWARDED_PROTO https;
        proxy_redirect off;

        listen       80;
        server_name  _;

        access_log  /var/<!-- /react-text --><span style="color:#0086b3;" data-reactid="499"><!-- react-text: 500 -->log<!-- /react-text --></span><!-- react-text: 501 -->/nginx/access.log  main;
        error_log   /var/<!-- /react-text --><span style="color:#0086b3;" data-reactid="502"><!-- react-text: 503 -->log<!-- /react-text --></span><!-- react-text: 504 -->/nginx/error.log;

        root        /home/XXUSERXX/XXAPPLICATIONXX/www/current/public/;
        try_files /<!-- /react-text --><span style="color:#008080;" data-reactid="505"><!-- react-text: 506 -->$uri<!-- /react-text --></span><!-- react-text: 507 -->/index.html /cache/<!-- /react-text --><span style="color:#008080;" data-reactid="508"><!-- react-text: 509 -->$uri<!-- /react-text --></span><!-- react-text: 510 -->/index.html /<!-- /react-text --><span style="color:#008080;" data-reactid="511"><!-- react-text: 512 -->$uri<!-- /react-text --></span><!-- react-text: 513 -->.html /cache/<!-- /react-text --><span style="color:#008080;" data-reactid="514"><!-- react-text: 515 -->$uri<!-- /react-text --></span><!-- react-text: 516 -->.html /<!-- /react-text --><span style="color:#008080;" data-reactid="517"><!-- react-text: 518 -->$uri<!-- /react-text --></span><!-- react-text: 519 --> /cache/<!-- /react-text --><span style="color:#008080;" data-reactid="520"><!-- react-text: 521 -->$uri<!-- /react-text --></span><!-- react-text: 522 --> @app;

        client_max_body_size 50M;

        location /primus {
            proxy_http_version 1.1;
            proxy_buffering off;
            proxy_set_header Upgrade <!-- /react-text --><span style="color:#008080;" data-reactid="523"><!-- react-text: 524 -->$http_upgrade<!-- /react-text --></span><!-- react-text: 525 -->;
            proxy_set_header Connection <!-- /react-text --><span style="color:#d14;" data-reactid="526"><!-- react-text: 527 -->&quot;Upgrade&quot;<!-- /react-text --></span><!-- react-text: 528 -->;
            proxy_set_header Host <!-- /react-text --><span style="color:#008080;" data-reactid="529"><!-- react-text: 530 -->$host<!-- /react-text --></span><!-- react-text: 531 -->;

            proxy_pass http://unix:/home/XXUSERXX/www/XXAPPLICATIONXX/shared/tmp/sockets/actionhero.sock;
        }

        location / {
            proxy_http_version 1.1;
            proxy_buffering off;
            proxy_cache_bypass <!-- /react-text --><span style="color:#008080;" data-reactid="532"><!-- react-text: 533 -->$http_pragma<!-- /react-text --></span><!-- react-text: 534 --> <!-- /react-text --><span style="color:#008080;" data-reactid="535"><!-- react-text: 536 -->$http_authorization<!-- /react-text --></span><!-- react-text: 537 -->;
            proxy_no_cache <!-- /react-text --><span style="color:#008080;" data-reactid="538"><!-- react-text: 539 -->$http_pragma<!-- /react-text --></span><!-- react-text: 540 --> <!-- /react-text --><span style="color:#008080;" data-reactid="541"><!-- react-text: 542 -->$http_authorization<!-- /react-text --></span><!-- react-text: 543 -->;

            proxy_pass http://unix:/home/XXUSERXX/www/XXAPPLICATIONXX/shared/tmp/sockets/actionhero.sock;
        }
    }

}<!-- /react-text --></code></pre><p data-reactid="544">While ActionHero can be the font-line server your users hit, it&#x27;s probably best to proxy ActionHero behind a load balancer, nginx, haproxy, etc.  This will help you pool connections before hitting node, SSL terminate, serve static assets, etc.</p><p data-reactid="545">Here is an example nginx config for interfacing with ActionHero, including using sockets (not http) and handing the websocket upgrade path.</p><ul data-reactid="546"><li data-reactid="547"><!-- react-text: 548 -->Note the proxy-pass format to the socket: <!-- /react-text --><code data-reactid="549">proxy_pass http://unix:/path/to/socket</code></li><li data-reactid="550">Note some of the extra work you need to have for the websocket upgrade headers (the primus directive)</li></ul></div></div></div><div data-reactid="551"><br data-reactid="552"/><h2 id="redis" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="553"><span style="font-weight:300;font-size:36px;" data-reactid="554">Redis High-Availability</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="555"/><div style="font-family:Open Sans, sans-serif;" data-reactid="556"><div data-reactid="557"><p data-reactid="558"><a href="http://redis.io/" data-reactid="559">Redis</a><!-- react-text: 560 --> is technically optional in ActionHero environments, but you will need it if you want to coordinates tasks across a cluster of workers, handle group chat mechanics between WebSocket clients, or do other cross-cluster operations.  In those cases, you&#x27;ll want your Redis setup to be reliable.  There are 2 methods to achieving HA redis: Sentinels and Cluster.  A simple architectural wireframe of how to deploy the various options is below  The <!-- /react-text --><a href="https://github.com/luin/ioredis" data-reactid="561"><code data-reactid="562">ioredis</code></a><!-- react-text: 563 --> node package supports both of these connection schemes, and all you need to change is your connection options.<!-- /react-text --></p><p data-reactid="564"><img width="100%" src="/static/images/redis.png" data-reactid="565"/></p><h3 data-reactid="566">Sentinel Mode</h3><p data-reactid="567">In Sentinel mode, you have your Redis configured in a normal master-&gt;slave configuration. However, rather than hard-code your application to know who the master and slaves are, your application connects to the Sentinel processes instead. These Sentinels transparently pipeline your connection to the proper Redis master, and they do this invisibly to ActionHero / your application.</p><p data-reactid="568">The biggest advantage to this configuration is high-availability. In the event of a master failure, the Sentinel processes reach a consensus, then elect a new master automatically. Since the same process which handles master election also manages the client connections, no requests are lost - the sentinels hold the connection idle and then replay any pending requests on the new master after election. In the configuration shown in the first diagram above, up to 2 Redis data nodes and any 1 Sentinel can fail without the entire system failing.</p><p data-reactid="569">Note that it is not necessary to run the Sentinel nodes on separate servers. They can be run as parallel processes on the Redis nodes themselves.</p><p data-reactid="570">To run this configuration, configure ioredis with a list of the Sentinel nodes and the name of the cluster. The driver will automatically connect to an appropriate Sentinel in round-robin fashion, reconnecting to another node if one is down, or fails.</p><p data-reactid="571"><!-- react-text: 572 -->An example of a <!-- /react-text --><code data-reactid="573">redis.js</code><!-- react-text: 574 --> config file for sentinels would be:<!-- /react-text --></p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="575"><code data-reactid="576"><!-- react-text: 577 -->exports.production = {
  <!-- /react-text --><span data-reactid="578"><!-- react-text: 579 -->redis<!-- /react-text --></span><!-- react-text: 580 -->: <!-- /react-text --><span data-reactid="581"><span style="color:#333;font-weight:bold;" data-reactid="582"><!-- react-text: 583 -->function<!-- /react-text --></span><!-- react-text: 584 -->(<!-- /react-text --><span data-reactid="585"><!-- react-text: 586 -->api<!-- /react-text --></span><!-- react-text: 587 -->)<!-- /react-text --></span><!-- react-text: 588 -->{
    <!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="589"><!-- react-text: 590 -->return<!-- /react-text --></span><!-- react-text: 591 --> {
      <!-- /react-text --><span data-reactid="592"><!-- react-text: 593 -->channel<!-- /react-text --></span><!-- react-text: 594 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="595"><!-- react-text: 596 -->&#x27;actionhero-myApp&#x27;<!-- /react-text --></span><!-- react-text: 597 -->,
      <!-- /react-text --><span data-reactid="598"><!-- react-text: 599 -->rpcTimeout<!-- /react-text --></span><!-- react-text: 600 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="601"><!-- react-text: 602 -->5000<!-- /react-text --></span><!-- react-text: 603 -->,

      <!-- /react-text --><span data-reactid="604"><!-- react-text: 605 -->pkg<!-- /react-text --></span><!-- react-text: 606 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="607"><!-- react-text: 608 -->&#x27;ioredis&#x27;<!-- /react-text --></span><!-- react-text: 609 -->,
      <!-- /react-text --><span data-reactid="610"><!-- react-text: 611 -->port<!-- /react-text --></span><!-- react-text: 612 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="613"><!-- react-text: 614 -->null<!-- /react-text --></span><!-- react-text: 615 -->,
      <!-- /react-text --><span data-reactid="616"><!-- react-text: 617 -->host<!-- /react-text --></span><!-- react-text: 618 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="619"><!-- react-text: 620 -->null<!-- /react-text --></span><!-- react-text: 621 -->,
      <!-- /react-text --><span data-reactid="622"><!-- react-text: 623 -->password<!-- /react-text --></span><!-- react-text: 624 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="625"><!-- react-text: 626 -->&#x27;redis-password&#x27;<!-- /react-text --></span><!-- react-text: 627 -->,
      <!-- /react-text --><span data-reactid="628"><!-- react-text: 629 -->database<!-- /react-text --></span><!-- react-text: 630 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="631"><!-- react-text: 632 -->0<!-- /react-text --></span><!-- react-text: 633 -->,

      <!-- /react-text --><span data-reactid="634"><!-- react-text: 635 -->options<!-- /react-text --></span><!-- react-text: 636 -->: {
        <!-- /react-text --><span data-reactid="637"><!-- react-text: 638 -->name<!-- /react-text --></span><!-- react-text: 639 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="640"><!-- react-text: 641 -->&#x27;myCluster&#x27;<!-- /react-text --></span><!-- react-text: 642 -->,
        <!-- /react-text --><span data-reactid="643"><!-- react-text: 644 -->password<!-- /react-text --></span><!-- react-text: 645 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="646"><!-- react-text: 647 -->&#x27;redis-password&#x27;<!-- /react-text --></span><!-- react-text: 648 -->,
        <!-- /react-text --><span data-reactid="649"><!-- react-text: 650 -->db<!-- /react-text --></span><!-- react-text: 651 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="652"><!-- react-text: 653 -->0<!-- /react-text --></span><!-- react-text: 654 -->,
        <!-- /react-text --><span data-reactid="655"><!-- react-text: 656 -->sentinels<!-- /react-text --></span><!-- react-text: 657 -->: [
          { <!-- /react-text --><span data-reactid="658"><!-- react-text: 659 -->host<!-- /react-text --></span><!-- react-text: 660 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="661"><!-- react-text: 662 -->&#x27;1.2.3.4&#x27;<!-- /react-text --></span><!-- react-text: 663 -->, <!-- /react-text --><span data-reactid="664"><!-- react-text: 665 -->port<!-- /react-text --></span><!-- react-text: 666 -->: <!-- /react-text --><span style="color:#008080;" data-reactid="667"><!-- react-text: 668 -->26379<!-- /react-text --></span><!-- react-text: 669 --> },
        ]
      }
    }
  }
}
<!-- /react-text --></code></pre><h3 data-reactid="670">Cluster Mode</h3><p data-reactid="671">In Cluster mode, Redis shards all the keys in data into &quot;slots&quot; which are evenly allocated though all the masters in the cluster. The client can connect to any node in the cluster, and if the requested key belongs on another node, it will proxy the request for you (just like the Sentinel would). The cluster can also take care of master re-election for each shard in the event of a master node failure.</p><p data-reactid="672">Cluster mode provides similar high-availability to Sentinel mode, but the sharding allows more data to be stored in the cluster overall. However, where Sentinel mode requires a minimum of 3 servers, Cluster mode requires a minimum of 6 to reach a quorom and provide full redundancy.</p><p data-reactid="673">Also an important note:  while you may opt to run &quot;sentinel processes&quot;, it&#x27;s the same codebase as regular redis, just running in &quot;sentinel mode&quot;.  The same goes if you run redis in &quot;cluster mode&quot;.</p><p data-reactid="674"><!-- react-text: 675 -->An example of a <!-- /react-text --><code data-reactid="676">redis.js</code><!-- react-text: 677 --> config file for redis cluster would be:<!-- /react-text --></p><div role="alert" class="alert alert-info" data-reactid="678"><!-- react-text: 679 -->TODO<!-- /react-text --></div></div></div></div><div data-reactid="680"><br data-reactid="681"/><h2 id="best-practices" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="682"><span style="font-weight:300;font-size:36px;" data-reactid="683">Best Practices</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="684"/><div style="font-family:Open Sans, sans-serif;" data-reactid="685"><div data-reactid="686"><p data-reactid="687">As ActionHero is a framework, much of the work for keeping your application secure is dependent on the types of actions and tasks you create.  That said, here is a list of general best-practices for ensuring your deployment is as robust as it can be:</p><h3 data-reactid="688">General Configuration</h3><ul data-reactid="689"><li data-reactid="690"><!-- react-text: 691 -->Be sure to change <!-- /react-text --><code data-reactid="692">api.config.general.serverToken</code><!-- react-text: 693 --> to something unique for your application<!-- /react-text --></li><li data-reactid="694"><!-- react-text: 695 -->Turn off <!-- /react-text --><a href="/docs/core/development-mode" data-reactid="696">developer mode</a><!-- react-text: 697 --> in production.<!-- /react-text --></li><li data-reactid="698"><!-- react-text: 699 -->Use <!-- /react-text --><code data-reactid="700">api.config.general.filteredParams</code><!-- react-text: 701 --> to hide sensitive information from the logs.  You probably don&#x27;t want to log out <!-- /react-text --><code data-reactid="702">password</code><!-- react-text: 703 -->, <!-- /react-text --><code data-reactid="704">credit_card</code><!-- react-text: 705 -->, and other things of that nature.<!-- /react-text --></li></ul><h3 data-reactid="706">Topology</h3><ul data-reactid="707"><li data-reactid="708"><!-- react-text: 709 -->Run a cluster via <!-- /react-text --><code data-reactid="710">start cluster</code><!-- react-text: 711 -->.  This will guarantee that you can reboot your application with 0 downtime and deploy new versions without interruption.<!-- /react-text --><ul data-reactid="712"><li data-reactid="713"><!-- react-text: 714 -->You can run 1 ActionHero instance per core (assuming the server is dedicated to ActionHero), and that is the default behavior of <!-- /react-text --><code data-reactid="715">start cluster</code><!-- react-text: 716 -->.<!-- /react-text --></li><li data-reactid="717">You don&#x27;t need a tool like PM2 to manage ActionHero cluster process, but you can.</li><li data-reactid="718"><!-- react-text: 719 -->You can use an init script to <!-- /react-text --><code data-reactid="720">start cluster</code><!-- react-text: 721 --> at boot, or use a tool like <!-- /react-text --><a href="https://mmonit.com/monit/" data-reactid="722">monit</a><!-- react-text: 723 --> to do it for you.<!-- /react-text --></li></ul></li><li data-reactid="724"><!-- react-text: 725 -->Never run tasks on the same ActionHero instances you run your servers on; never run your servers on the same ActionHero instances you run your tasks on<!-- /react-text --><ul data-reactid="726"><li data-reactid="727">Yes, under most situations running servers + tasks on the same instance will work OK, but the load profiles (and often the types of packages required) vary in each deployment.  Actions are designed to respond quickly and offload hard computations to tasks.  Tasks are designed to work slower computations.</li><li data-reactid="728">Do any CPU-intensive work in a task.  If a client needs to see the result of a CPU-intensive operation, poll for it (or use web-sockets)</li></ul></li><li data-reactid="729"><!-- react-text: 730 -->Use a centralized logging tool like Splunk, ELK, SumoLogic, etc.  ActionHero is <!-- /react-text --><em data-reactid="731">built for the cloud</em><!-- react-text: 732 -->, which means that it expects pids, application names, etc to change, and as such, will create many log files.  Use a centralized tool to inspect the state of your application.<!-- /react-text --><ul data-reactid="733"><li data-reactid="734"><!-- react-text: 735 -->Log everything.  You never know what you might want to check up on. <!-- /react-text --><!-- react-text: 736 -->ActionHero&#x27;s<!-- /react-text --><!-- react-text: 737 --> logger has various levels you can use for this.<!-- /react-text --></li></ul></li><li data-reactid="738">Split out the redis instance you use for cache from the one you use for tasks.  If your cache fills up, do you want task processing to fail?</li><li data-reactid="739"><!-- react-text: 740 -->Your web request stack should look like: [Load Balancer] -&gt; [App Server] -&gt; [Nginx] -&gt; [ActionHero]<!-- /react-text --><ul data-reactid="741"><li data-reactid="742">This layout allows you to have control, back-pressure and throttling at many layers.</li><li data-reactid="743">Configure Nginx to serve static files whenever possible to remove load from ActionHero, and leave it just to process actions</li></ul></li><li data-reactid="744">Use a CDN. ActionHero will serve static files with the proper last-modified headers, so your CDN should respect this, and you should not need to worry about asset SHAs/Checksums.</li><li data-reactid="745"><!-- react-text: 746 -->Use redis-cluster or redis-sentinel.  The <!-- /react-text --><a href="https://github.com/luin/ioredis" data-reactid="747"><code data-reactid="748">ioredis</code></a><!-- react-text: 749 --> redis library has support for them by default.  This allows you to have a High Availability redis configuration.<!-- /react-text --></li></ul><h3 data-reactid="750">Crashing and Safety</h3><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="751"><code data-reactid="752"><!-- react-text: 753 -->&gt; ./node_modules./bin/actionhero start cluster --workers 1
2016-04-11T18:51:32.891Z - info: actionhero &gt;&gt; start cluster
2016-04-11T18:51:32.904Z - notice:  - STARTING CLUSTER -
2016-04-11T18:51:32.905Z - notice: pid: 43315
2016-04-11T18:51:32.911Z - info: starting worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="754"><!-- react-text: 755 -->#1<!-- /react-text --></span><!-- react-text: 756 -->
2016-04-11T18:51:33.097Z - info: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="757"><!-- react-text: 758 -->#1 (43316)]: starting<!-- /react-text --></span><!-- react-text: 759 -->
2016-04-11T18:51:33.984Z - info: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="760"><!-- react-text: 761 -->#1 (43316)]: started<!-- /react-text --></span><!-- react-text: 762 -->
2016-04-11T18:51:33.985Z - notice: cluster equilibrium state reached with 1 workers
2016-04-11T18:51:44.775Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="763"><!-- react-text: 764 -->#1 (43316)]: uncaught exception =&gt; yay is not defined<!-- /react-text --></span><!-- react-text: 765 -->
2016-04-11T18:51:44.775Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="766"><!-- react-text: 767 -->#1 (43316)]:    ReferenceError: yay is not defined<!-- /react-text --></span><!-- react-text: 768 -->
2016-04-11T18:51:44.775Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="769"><!-- react-text: 770 -->#1 (43316)]:        at Object.exports.action.run (/app/actionhero/actions/bad.js:14:5)<!-- /react-text --></span><!-- react-text: 771 -->
2016-04-11T18:51:44.775Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="772"><!-- react-text: 773 -->#1 (43316)]:        at /app/actionhero/initializers/ActionProcessor.js:268:31<!-- /react-text --></span><!-- react-text: 774 -->
2016-04-11T18:51:44.775Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="775"><!-- react-text: 776 -->#1 (43316)]:        at /app/actionhero/initializers/ActionProcessor.js:149:9<!-- /react-text --></span><!-- react-text: 777 -->
2016-04-11T18:51:44.776Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="778"><!-- react-text: 779 -->#1 (43316)]:        at /app/actionhero/node_modules/async/lib/async.js:726:13<!-- /react-text --></span><!-- react-text: 780 -->
2016-04-11T18:51:44.776Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="781"><!-- react-text: 782 -->#1 (43316)]:        at /app/actionhero/node_modules/async/lib/async.js:52:16<!-- /react-text --></span><!-- react-text: 783 -->
2016-04-11T18:51:44.776Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="784"><!-- react-text: 785 -->#1 (43316)]:        at iterate (/app/actionhero/node_modules/async/lib/async.js:260:24)<!-- /react-text --></span><!-- react-text: 786 -->
2016-04-11T18:51:44.776Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="787"><!-- react-text: 788 -->#1 (43316)]:        at async.forEachOfSeries.async.eachOfSeries (/app/actionhero/node_modules/async/lib/async.js:281:9)<!-- /react-text --></span><!-- react-text: 789 -->
2016-04-11T18:51:44.776Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="790"><!-- react-text: 791 -->#1 (43316)]:        at _parallel (/app/actionhero/node_modules/async/lib/async.js:717:9)<!-- /react-text --></span><!-- react-text: 792 -->
2016-04-11T18:51:44.776Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="793"><!-- react-text: 794 -->#1 (43316)]:        at Object.async.series (/app/actionhero/node_modules/async/lib/async.js:739:9)<!-- /react-text --></span><!-- react-text: 795 -->
2016-04-11T18:51:44.777Z - alert: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="796"><!-- react-text: 797 -->#1 (43316)]:        at api.ActionProcessor.preProcessAction (/app/actionhero/initializers/ActionProcessor.js:148:13)<!-- /react-text --></span><!-- react-text: 798 -->
2016-04-11T18:51:44.777Z - notice: cluster equilibrium state reached with 1 workers
2016-04-11T18:51:44.785Z - info: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="799"><!-- react-text: 800 -->#1 (43316)]: exited<!-- /react-text --></span><!-- react-text: 801 -->
2016-04-11T18:51:44.785Z - info: starting worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="802"><!-- react-text: 803 -->#1<!-- /react-text --></span><!-- react-text: 804 -->
2016-04-11T18:51:44.960Z - info: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="805"><!-- react-text: 806 -->#1 (43323)]: starting<!-- /react-text --></span><!-- react-text: 807 -->
2016-04-11T18:51:45.827Z - info: [worker <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="808"><!-- react-text: 809 -->#1 (43323)]: started<!-- /react-text --></span><!-- react-text: 810 -->
2016-04-11T18:51:45.827Z - notice: cluster equilibrium state reached with 1 workers
<!-- /react-text --></code></pre><ul data-reactid="811"><li data-reactid="812"><!-- react-text: 813 -->Let the app crash rather than being defensive prematurely.  ActionHero has a good logger, and if you are running within <!-- /react-text --><code data-reactid="814">start cluster</code><!-- react-text: 815 --> mode, your server will be restarted.  It is very easy to hide uncaught errors, exceptions, or un-resolved promises, and doing so might leave your application in strange state.<!-- /react-text --></li><li data-reactid="816"><!-- react-text: 817 -->We removed domains from the project in v13 to follow this philosophy, and rely on a parent process (<!-- /react-text --><code data-reactid="818">start cluster</code><!-- react-text: 819 -->) to handle error logging.  Domains are deprecated in node.js now for the same reasons we discuss here.<!-- /react-text --><ul data-reactid="820"><li data-reactid="821">For example, if you timeout connections that are taking too long, what are you going to do about the database connection it was running?  Will you roll it back?  What about the other clients using the same connection pool?  How can you be sure which connection in the mySQL pool was in use?  Rather than handle all these edge cases… just let your app crash, log, and reboot.</li></ul></li><li data-reactid="822"><!-- react-text: 823 -->As noted above, centralized logging (Splunk et al) will be invaluable here.  You can can also employ a tool like <!-- /react-text --><a href="https://bugsnag.com" data-reactid="824">BugSnag</a><!-- react-text: 825 --> to collect and correlate errors.<!-- /react-text --></li></ul><h3 data-reactid="826">Actions</h3><ul data-reactid="827"><li data-reactid="828"><!-- react-text: 829 -->Remember that all params which come in via the <!-- /react-text --><code data-reactid="830">web</code><!-- react-text: 831 --> and <!-- /react-text --><code data-reactid="832">socket</code><!-- react-text: 833 --> servers are <!-- /react-text --><code data-reactid="834">String</code><!-- react-text: 835 -->s.  If you want to typeCast them (perhaps you always know that the param <!-- /react-text --><code data-reactid="836">user_id</code><!-- react-text: 837 --> will be an integer), you can do so in a middleware or within an action&#x27;s <!-- /react-text --><a href="/docs/core/actions" data-reactid="838"><code data-reactid="839">params.formatter</code></a><!-- react-text: 840 --> step.<!-- /react-text --></li><li data-reactid="841">Always remember to sanitize any input for SQL injection, etc.  The best way to describe this is &quot;never pass a query to your database which can be directly modified via user input&quot;!</li><li data-reactid="842">Remember that you can restrict actions to specific server types.  Perhaps only a web POST request should be able to login, and not a websocket client.  You can control application flow this way.</li><li data-reactid="843"><!-- react-text: 844 -->Crafting <!-- /react-text --><a href="https://github.com/actionhero/actionhero-angular-bootstrap-cors-csrf" data-reactid="845">authentication middleware is not that hard</a></li></ul><h3 data-reactid="846">Tasks</h3><ul data-reactid="847"><li data-reactid="848">Tasks can be created from any part of ActionHero: Actions, Servers, Middleware, even other Tasks.</li><li data-reactid="849">You can chain tasks together to create workflows.</li><li data-reactid="850"><!-- react-text: 851 -->ActionHero uses the <!-- /react-text --><a href="https://github.com/taskrabbit/node-resque#multi-worker" data-reactid="852"><code data-reactid="853">multiWorker</code></a><!-- react-text: 854 --> from node-resque.  When configured properly, it will consume 100% of a CPU core, to work as many tasks at once as it can.  This will also fluctuate depending on the CPU difficulty of the job.  Plan accordingly.<!-- /react-text --></li><li data-reactid="855"><!-- react-text: 856 -->Create a way to view the state of your redis cluster.  Are you running out of RAM?  Are your Queues growing faster than they can be worked?  Checking this information is the key to having a healthy ecosystem. <!-- /react-text --><a href="/docs/core/tasks" data-reactid="857">The methods for doing so</a><!-- react-text: 858 --> are available.<!-- /react-text --></li><li data-reactid="859">Be extra-save within your actions, and do not allow an uncaught exception.  This will cause the worker to crash and the job to be remain &#x27;claimed&#x27; in redis, and never make it to the failed queue.</li></ul></div></div></div></div></div></div><div class="hidden-xs hidden-sm col-md-3" data-reactid="860"><div style="height:0;" data-reactid="861"><div data-reactid="862"><div data-reactid="863"></div><div style="padding-top:90px;" class="" data-reactid="864"><div data-reactid="865"><!-- react-empty: 866 --><div class="ais-InstantSearch__root" data-reactid="867"><form novalidate="" class="ais-SearchBox__root" action="" role="search" data-reactid="868"><svg xmlns="http://www.w3.org/2000/svg" style="display:none;" data-reactid="869"><symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-search-13" viewBox="0 0 40 40" data-reactid="870"><path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z" fill-rule="evenodd" data-reactid="871"></path></symbol><symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-clear-3" viewBox="0 0 20 20" data-reactid="872"><path d="M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z" fill-rule="evenodd" data-reactid="873"></path></symbol></svg><div role="search" class="ais-SearchBox__wrapper" data-reactid="874"><input type="search" placeholder="Search here…" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" required="" value="" class="ais-SearchBox__input" data-reactid="875"/><button type="submit" title="Submit your search query." class="ais-SearchBox__submit" data-reactid="876"><svg role="img" width="1em" height="1em" data-reactid="877"><use xlink:href="#sbx-icon-search-13" data-reactid="878"></use></svg></button><button type="reset" title="Clear the search query." class="ais-SearchBox__reset" data-reactid="879"><svg role="img" width="1em" height="1em" data-reactid="880"><use xlink:href="#sbx-icon-clear-3" data-reactid="881"></use></svg></button></div></form><div class="ais-Hits__root" data-reactid="882"></div></div><br data-reactid="883"/></div><ul style="list-style-type:none;padding-left:0;margin-left:0;" data-reactid="884"><li data-reactid="885"><a href="#topology" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="886">Topology Example</a></li><li data-reactid="887"><a href="#paths" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="888">Paths and Environments</a></li><li data-reactid="889"><a href="#daemon" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="890">Daemon</a></li><li data-reactid="891"><a href="#number-of-workers" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="892">Number of Workers</a></li><li data-reactid="893"><a href="#pidfiles" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="894">Pidfiles</a></li><li data-reactid="895"><a href="#git" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="896">Git-Based Deployment</a></li><li data-reactid="897"><a href="#procfile" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="898">PAAS and Procfile Deployment</a></li><li data-reactid="899"><a href="#global-packages" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="900">Global Packages</a></li><li data-reactid="901"><a href="#nginx" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="902">Nginx Example</a></li><li data-reactid="903"><a href="#redis" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="904">Redis High-Availability</a></li><li data-reactid="905"><a href="#best-practices" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="906">Best Practices</a></li></ul><br data-reactid="907"/><ul style="list-style-type:none;padding-left:0;margin-left:0;" data-reactid="908"><div data-reactid="909"><li data-reactid="910"><a style="font-weight:200;color:#E14E3A;" href="/docs/ops/upgrade-path/" data-reactid="911">» Core: Upgrade Path</a></li><li data-reactid="912"><a style="font-weight:200;color:#E14E3A;" href="/docs/ops/testing/" data-reactid="913">« Core: Testing</a></li></div><li data-reactid="914"><a href="#_top" style="font-weight:200;color:#E14E3A;" data-reactid="915">↑ Back to top</a></li></ul></div></div></div></div></div></div><div style="padding-bottom:100px;color:#2F5266;" data-reactid="916"><div class="container" data-reactid="917"><div class="row" data-reactid="918"><div style="text-align:center;" class="col-md-12" data-reactid="919"><hr style="color:#2F5266;background-color:#2F5266;border:0;height:2px;" data-reactid="920"/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="921"><span style="font-weight:400;" data-reactid="922">Up Next</span></h2><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="923"><a href="/docs/ops/upgrade-path/" data-reactid="924">Core: Upgrade Path</a></h2></div></div></div></div></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300;" class="container-fluid" data-reactid="925"><footer id="footer-container" style="background-color:#2F5266;color:#FBF9E4;font-family:Roboto, sans-serif;font-weight:200;" data-reactid="926"><div class="container" data-reactid="927"><div style="padding-bottom:50px;padding-top:50px;padding-left:100px;" class="row" data-reactid="928"><div class="col-md-12" data-reactid="929"><img src="/static/images/actionhero-logo-header-wordmark.svg" data-reactid="930"/></div></div><div style="padding-bottom:100px;" class="row" data-reactid="931"><div class="col-md-4" data-reactid="932"><div style="padding-left:100px;" data-reactid="933"><p data-reactid="934"><a style="color:#FBF9E4;" href="/terms/" data-reactid="935">Terms</a></p><p data-reactid="936"><!-- react-text: 937 -->Contact us at <!-- /react-text --><a style="color:#FBF9E4;font-weight:500;" href="mailto:hello@actionherojs.com" data-reactid="938">hello@actionherojs.com</a></p><p data-reactid="939"><a target="_new" style="color:#FBF9E4;" href="https://medium.com/tag/actionherojs/" data-reactid="940">Blogs</a></p><p data-reactid="941"><!-- react-text: 942 -->© 2017<!-- /react-text --><!-- react-text: 943 --> ActionHero<!-- /react-text --></p><p data-reactid="944"><em data-reactid="945"><!-- react-text: 946 -->Search by <!-- /react-text --><a href="https://www.algolia.com" target="_new" data-reactid="947"><!-- react-text: 948 -->Algolia <!-- /react-text --><img style="padding:5px;" width="30" src="/static/images/algolia.svg" data-reactid="949"/></a></em></p></div></div><div class="col-md-4" data-reactid="950"><div style="padding-left:100px;" data-reactid="951"><p data-reactid="952"><a style="color:#FBF9E4;" href="/get-started/" data-reactid="953">Get Started</a></p><p data-reactid="954"><a style="color:#FBF9E4;" href="/docs/" data-reactid="955">Documenation</a></p><p data-reactid="956"><a style="color:#FBF9E4;" href="/solutions/" data-reactid="957">Solutions</a></p><p data-reactid="958"><a style="color:#FBF9E4;" href="/community/" data-reactid="959">Community</a></p><p data-reactid="960"><a style="color:#FBF9E4;" href="/downloads/" data-reactid="961">Downloads</a></p></div></div><div class="col-md-4" data-reactid="962"><div style="padding-left:100px;" data-reactid="963"><p data-reactid="964"><a target="_new" style="color:#FBF9E4;" href="https://www.npmjs.com/package/actionhero/" data-reactid="965">NPM</a></p><p data-reactid="966"><a target="_new" style="color:#FBF9E4;" href="https://twitter.com/actionherojs/" data-reactid="967">Twitter</a></p><p data-reactid="968"><a target="_new" style="color:#FBF9E4;" href="https://slack.actionherojs.com/" data-reactid="969">Slack</a></p><p data-reactid="970"><a target="_new" style="color:#FBF9E4;" href="https://github.com/actionhero/actionhero/" data-reactid="971">Github</a></p></div></div></div></div></footer></div></div></div></div><div id="__next-error"></div></div><div><script>
          __NEXT_DATA__ = {"props":{},"pathname":"/docs/ops/production-notes","query":{},"buildId":"009e820d-140a-423a-9a90-c778aadab04e","buildStats":{"app.js":{"hash":"517642acd6437ad7e589c92138f402c3"}},"assetPrefix":"","nextExport":true,"err":null,"chunks":[]}
          module={}
          __NEXT_LOADED_PAGES__ = []
          __NEXT_LOADED_CHUNKS__ = []

          __NEXT_REGISTER_PAGE = function (route, fn) {
            __NEXT_LOADED_PAGES__.push({ route: route, fn: fn })
          }

          __NEXT_REGISTER_CHUNK = function (chunkName, fn) {
            __NEXT_LOADED_CHUNKS__.push({ chunkName: chunkName, fn: fn })
          }
        </script><script async="" id="__NEXT_PAGE__/docs/ops/production-notes" type="text/javascript" src="/_next/009e820d-140a-423a-9a90-c778aadab04e/page/docs/ops/production-notes/index.js"></script><script async="" id="__NEXT_PAGE__/_error" type="text/javascript" src="/_next/009e820d-140a-423a-9a90-c778aadab04e/page/_error/index.js"></script><div></div><script type="text/javascript" src="/_next/517642acd6437ad7e589c92138f402c3/app.js" async=""></script></div></body></html>