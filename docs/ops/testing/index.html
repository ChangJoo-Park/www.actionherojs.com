<!DOCTYPE html><html><head><link rel="preload" href="/_next/009e820d-140a-423a-9a90-c778aadab04e/page/docs/ops/testing/index.js" as="script"/><link rel="preload" href="/_next/009e820d-140a-423a-9a90-c778aadab04e/page/_error/index.js" as="script"/><link rel="preload" href="/_next/517642acd6437ad7e589c92138f402c3/app.js" as="script"/><meta charset="utf-8" class="next-head"/><link rel="apple-touch-icon" sizes="57x57" href="/static/images/icons/apple-icon-57x57.png" class="next-head"/><link rel="apple-touch-icon" sizes="60x60" href="/static/images/icons/apple-icon-60x60.png" class="next-head"/><link rel="apple-touch-icon" sizes="72x72" href="/static/images/icons/apple-icon-72x72.png" class="next-head"/><link rel="apple-touch-icon" sizes="76x76" href="/static/images/icons/apple-icon-76x76.png" class="next-head"/><link rel="apple-touch-icon" sizes="114x114" href="/static/images/icons/apple-icon-114x114.png" class="next-head"/><link rel="apple-touch-icon" sizes="120x120" href="/static/images/icons/apple-icon-120x120.png" class="next-head"/><link rel="apple-touch-icon" sizes="144x144" href="/static/images/icons/apple-icon-144x144.png" class="next-head"/><link rel="apple-touch-icon" sizes="152x152" href="/static/images/icons/apple-icon-152x152.png" class="next-head"/><link rel="apple-touch-icon" sizes="180x180" href="/static/images/icons/apple-icon-180x180.png" class="next-head"/><link rel="icon" type="image/png" sizes="192x192" href="/static/images/icons/android-icon-192x192.png" class="next-head"/><link rel="icon" type="image/png" sizes="32x32" href="/static/images/icons/favicon-32x32.png" class="next-head"/><link rel="icon" type="image/png" sizes="96x96" href="/static/images/icons/favicon-96x96.png" class="next-head"/><link rel="icon" type="image/png" sizes="16x16" href="/static/images/icons/favicon-16x16.png" class="next-head"/><meta name="viewport" content="width=device-width" class="next-head"/><link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css" class="next-head"/><link rel="stylesheet" type="text/css" href="/static/css/bebasNeue.css" class="next-head"/><link rel="stylesheet" type="text/css" href="/static/css/animations.css" class="next-head"/><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800|Roboto:100,300,400,500,700,900" rel="stylesheet" class="next-head"/><title class="next-head">ActionHero</title><script src="/static/js/googleAnalytics.js" class="next-head"></script><link rel="stylesheet" href="https://unpkg.com/react-instantsearch-theme-algolia@4.0.0/style.min.css" class="next-head"/></head><body><div><div id="__next"><div data-reactroot="" data-reactid="1" data-react-checksum="-596799465"><div data-reactid="2"><!-- react-empty: 3 --><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300;" class="container-fluid" data-reactid="4"><header style="background-color:#2F5266;" data-reactid="5"><div class="container" data-reactid="6"><nav style="background-color:#2F5266;padding-top:5px;margin-bottom:10px;border:0;" class="navbar navbar-default" data-reactid="7"><div class="container" data-reactid="8"><div class="navbar-header" data-reactid="9"><a style="padding-top:0;margin-bottom:15px;" class="navbar-brand" data-reactid="10"><img src="/static/images/actionhero-logo-header-wordmark.svg" style="padding-top:14px;padding-bottom:20px;" data-reactid="11"/></a><button type="button" class="navbar-toggle collapsed" data-reactid="12"><span class="sr-only" data-reactid="13">Toggle navigation</span><span class="icon-bar" data-reactid="14"></span><span class="icon-bar" data-reactid="15"></span><span class="icon-bar" data-reactid="16"></span></button></div><div class="navbar-collapse collapse" data-reactid="17"><ul class="nav navbar-nav navbar-right" data-reactid="18"></ul><ul class="hidden-md hidden-sm hidden-xs nav navbar-nav navbar-left" data-reactid="19"><li role="presentation" class="" data-reactid="20"><a role="button" href="#" data-reactid="21"> </a></li><li role="presentation" class="" data-reactid="22"><a role="button" href="#" data-reactid="23"> </a></li><li role="presentation" class="" data-reactid="24"><a role="button" href="#" data-reactid="25"> </a></li><li role="presentation" class="" data-reactid="26"><a role="button" href="#" data-reactid="27"> </a></li></ul><ul class="nav navbar-nav navbar-left" data-reactid="28"><li role="presentation" class="" data-reactid="29"><a role="button" href="#" data-reactid="30"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;" data-reactid="31">Downloads</span></a></li><li role="presentation" class="" data-reactid="32"><a role="button" href="#" data-reactid="33"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;" data-reactid="34">Documentation</span></a></li><li role="presentation" class="hidden-sm" data-reactid="35"><a role="button" href="#" data-reactid="36"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;" data-reactid="37">Solutions</span></a></li><li role="presentation" class="" data-reactid="38"><a role="button" href="#" data-reactid="39"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;" data-reactid="40">Community</span></a></li></ul><ul class="nav navbar-nav navbar-right" data-reactid="41"><div data-reactid="42"><a style="text-decoration:none;" href="/get-started/" data-reactid="43"><button style="font-family:Roboto, sans-serif;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#6E8898;border-color:#6E8898;font-weight:300;margin-top:20px;margin-bottom:0;margin-left:10px;margin-right:10px;outline:none;" type="button" class="btn btn-lg btn-default btn-block" data-reactid="44">Get Started</button></a></div></ul></div></div></nav></div></header></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300;" class="container-fluid" data-reactid="45"><div style="background-color:#FBF9E4;color:#2F5266;font-weight:200;padding:50px;" data-reactid="46"><div class="container" data-reactid="47"><div class="row" data-reactid="48"><div style="text-align:center;" class="col-md-3" data-reactid="49"><img src="/static/images/ops-tools.svg" data-reactid="50"/></div><div style="text-align:center;" class="col-md-6" data-reactid="51"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px;" data-reactid="52"><br data-reactid="53"/><!-- react-text: 54 -->Operations: Testing<!-- /react-text --></h1></div><div class="col-md-3" data-reactid="55"></div></div></div></div><div style="height:183px;background:url(&quot;/static/images/clouds-white.svg&quot;) no-repeat center #FBF9E4;" data-reactid="56"></div><div style="padding-bottom:100px;" class="container" data-reactid="57"><div class="row" data-reactid="58"><div id="_top" data-reactid="59"></div><div id="docPageContent" class="col-md-9" data-reactid="60"><div class="row" data-reactid="61"><div class="col-md-12" data-reactid="62"><div data-reactid="63"><br data-reactid="64"/><h2 id="overview" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="65"><span style="font-weight:300;font-size:36px;" data-reactid="66">Overview</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="67"/><div style="font-family:Open Sans, sans-serif;" data-reactid="68"><div data-reactid="69"><p data-reactid="70"><!-- react-text: 71 -->ActionHero provides test helpers so that you may try your actions and tasks within a headless environment. We do this by including a <!-- /react-text --><code data-reactid="72">specHelper</code><!-- react-text: 73 --> initializer which creates a server, <!-- /react-text --><code data-reactid="74">testServer</code><!-- react-text: 75 --> when running within the test environment.  Via the <!-- /react-text --><code data-reactid="76">testServer</code><!-- react-text: 77 -->, you can easily call actions or tasks without making a real request.<!-- /react-text --></p><p data-reactid="78"><!-- react-text: 79 -->We have chosen <!-- /react-text --><a href="http://mochajs.org/" data-reactid="80">mocha</a><!-- react-text: 81 --> as our test framework and <!-- /react-text --><a href="http://chaijs.com/" data-reactid="82">chai</a><!-- react-text: 83 --> as our assertion tool which are included as dependencies within all new projects (<!-- /react-text --><a href="/docs/get-started" data-reactid="84">generated</a><!-- react-text: 85 --> with <!-- /react-text --><code data-reactid="86">./node_modules/.bin/actionhero generate</code><!-- react-text: 87 -->).  We also use <!-- /react-text --><code data-reactid="88">cross-env</code><!-- react-text: 89 --> to set NODE_ENV in a way that works for all operating systems, including Windows. You do not need to use these testing tools, but an example will be provided which makes use of them.<!-- /react-text --></p><p data-reactid="90"><!-- react-text: 91 -->You also don&#x27;t need to use these test helpers, and you may want to make a real http or websocket request to test something specific.  If this is the case, you can <!-- /react-text --><a href="https://github.com/actionhero/actionhero/tree/master/test/servers" data-reactid="92">check out how ActionHero tests its own servers</a><!-- react-text: 93 --> for examples.<!-- /react-text --></p></div></div></div><div data-reactid="94"><br data-reactid="95"/><h2 id="get-started" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="96"><span style="font-weight:300;font-size:36px;" data-reactid="97">Getting Started</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="98"/><div style="font-family:Open Sans, sans-serif;" data-reactid="99"><div data-reactid="100"><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="101"><code data-reactid="102"><span style="color:#998;font-style:italic;" data-reactid="103"><!-- react-text: 104 -->// package.json from a new actionhero project with `mocha` and `chai` included<!-- /react-text --></span><!-- react-text: 105 -->
{
  <!-- /react-text --><span style="color:#d14;" data-reactid="106"><!-- react-text: 107 -->&quot;author&quot;<!-- /react-text --></span><!-- react-text: 108 -->      : <!-- /react-text --><span style="color:#d14;" data-reactid="109"><!-- react-text: 110 -->&quot;YOU &lt;YOU@example.com&gt;&quot;<!-- /react-text --></span><!-- react-text: 111 -->,
  <!-- /react-text --><span style="color:#d14;" data-reactid="112"><!-- react-text: 113 -->&quot;name&quot;<!-- /react-text --></span><!-- react-text: 114 -->        : <!-- /react-text --><span style="color:#d14;" data-reactid="115"><!-- react-text: 116 -->&quot;my_actionhero_project&quot;<!-- /react-text --></span><!-- react-text: 117 -->,
  <!-- /react-text --><span style="color:#d14;" data-reactid="118"><!-- react-text: 119 -->&quot;description&quot;<!-- /react-text --></span><!-- react-text: 120 --> : <!-- /react-text --><span style="color:#d14;" data-reactid="121"><!-- react-text: 122 -->&quot;my actionhero project&quot;<!-- /react-text --></span><!-- react-text: 123 -->,
  <!-- /react-text --><span style="color:#d14;" data-reactid="124"><!-- react-text: 125 -->&quot;version&quot;<!-- /react-text --></span><!-- react-text: 126 -->     : <!-- /react-text --><span style="color:#d14;" data-reactid="127"><!-- react-text: 128 -->&quot;0.0.1&quot;<!-- /react-text --></span><!-- react-text: 129 -->,
  <!-- /react-text --><span style="color:#d14;" data-reactid="130"><!-- react-text: 131 -->&quot;engines&quot;<!-- /react-text --></span><!-- react-text: 132 -->     : {
    <!-- /react-text --><span style="color:#d14;" data-reactid="133"><!-- react-text: 134 -->&quot;node&quot;<!-- /react-text --></span><!-- react-text: 135 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="136"><!-- react-text: 137 -->&quot;&gt;=0.10.0&quot;<!-- /react-text --></span><!-- react-text: 138 -->
  },
  <!-- /react-text --><span style="color:#d14;" data-reactid="139"><!-- react-text: 140 -->&quot;dependencies&quot;<!-- /react-text --></span><!-- react-text: 141 --> : {
    <!-- /react-text --><span style="color:#d14;" data-reactid="142"><!-- react-text: 143 -->&quot;actionhero&quot;<!-- /react-text --></span><!-- react-text: 144 --> : <!-- /react-text --><span style="color:#d14;" data-reactid="145"><!-- react-text: 146 -->&quot;12.3.0&quot;<!-- /react-text --></span><!-- react-text: 147 -->,
    <!-- /react-text --><span style="color:#d14;" data-reactid="148"><!-- react-text: 149 -->&quot;ws&quot;<!-- /react-text --></span><!-- react-text: 150 -->         : <!-- /react-text --><span style="color:#d14;" data-reactid="151"><!-- react-text: 152 -->&quot;latest&quot;<!-- /react-text --></span><!-- react-text: 153 -->
  },
  <!-- /react-text --><span style="color:#d14;" data-reactid="154"><!-- react-text: 155 -->&quot;devDependencies&quot;<!-- /react-text --></span><!-- react-text: 156 --> : {
    <!-- /react-text --><span style="color:#d14;" data-reactid="157"><!-- react-text: 158 -->&quot;cross-env&quot;<!-- /react-text --></span><!-- react-text: 159 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="160"><!-- react-text: 161 -->&quot;latest&quot;<!-- /react-text --></span><!-- react-text: 162 -->,
    <!-- /react-text --><span style="color:#d14;" data-reactid="163"><!-- react-text: 164 -->&quot;mocha&quot;<!-- /react-text --></span><!-- react-text: 165 -->  : <!-- /react-text --><span style="color:#d14;" data-reactid="166"><!-- react-text: 167 -->&quot;latest&quot;<!-- /react-text --></span><!-- react-text: 168 -->,
    <!-- /react-text --><span style="color:#d14;" data-reactid="169"><!-- react-text: 170 -->&quot;chai&quot;<!-- /react-text --></span><!-- react-text: 171 --> : <!-- /react-text --><span style="color:#d14;" data-reactid="172"><!-- react-text: 173 -->&quot;latest&quot;<!-- /react-text --></span><!-- react-text: 174 -->
  },
  <!-- /react-text --><span style="color:#d14;" data-reactid="175"><!-- react-text: 176 -->&quot;scripts&quot;<!-- /react-text --></span><!-- react-text: 177 --> : {
    <!-- /react-text --><span style="color:#d14;" data-reactid="178"><!-- react-text: 179 -->&quot;help&quot;<!-- /react-text --></span><!-- react-text: 180 -->         : <!-- /react-text --><span style="color:#d14;" data-reactid="181"><!-- react-text: 182 -->&quot;actionhero help&quot;<!-- /react-text --></span><!-- react-text: 183 -->,
    <!-- /react-text --><span style="color:#d14;" data-reactid="184"><!-- react-text: 185 -->&quot;start&quot;<!-- /react-text --></span><!-- react-text: 186 -->        : <!-- /react-text --><span style="color:#d14;" data-reactid="187"><!-- react-text: 188 -->&quot;actionhero start&quot;<!-- /react-text --></span><!-- react-text: 189 -->,
    <!-- /react-text --><span style="color:#d14;" data-reactid="190"><!-- react-text: 191 -->&quot;actionhero&quot;<!-- /react-text --></span><!-- react-text: 192 -->   : <!-- /react-text --><span style="color:#d14;" data-reactid="193"><!-- react-text: 194 -->&quot;actionhero&quot;<!-- /react-text --></span><!-- react-text: 195 -->,
    <!-- /react-text --><span style="color:#d14;" data-reactid="196"><!-- react-text: 197 -->&quot;start cluster&quot;<!-- /react-text --></span><!-- react-text: 198 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="199"><!-- react-text: 200 -->&quot;actionhero start cluster&quot;<!-- /react-text --></span><!-- react-text: 201 -->,
    <!-- /react-text --><span style="color:#d14;" data-reactid="202"><!-- react-text: 203 -->&quot;test&quot;<!-- /react-text --></span><!-- react-text: 204 -->         : <!-- /react-text --><span style="color:#d14;" data-reactid="205"><!-- react-text: 206 -->&quot;cross-env NODE_ENV=test mocha&quot;<!-- /react-text --></span><!-- react-text: 207 -->
  }
}
<!-- /react-text --></code></pre><p data-reactid="208"><!-- react-text: 209 -->To run a mocha test suite, you invoke the mocha binary, <!-- /react-text --><code data-reactid="210">./node_modules/.bin/mocha</code><!-- react-text: 211 -->.  This will tell mocha to look in your <!-- /react-text --><code data-reactid="212">./test</code><!-- react-text: 213 --> folder and run any tests that it can find.  There are ways to change the test folder location, only run specific tests, change the reporting format and more which you can learn about on <!-- /react-text --><a href="http://mochajs.org/" data-reactid="214">Mocha&#x27;s website</a><!-- react-text: 215 -->.  We asume that you have <!-- /react-text --><code data-reactid="216">mocha</code><!-- react-text: 217 --> (and <!-- /react-text --><code data-reactid="218">chai</code><!-- react-text: 219 -->) installed to your project by listing it in your <!-- /react-text --><code data-reactid="220">package.json</code><!-- react-text: 221 -->.  If you used <!-- /react-text --><code data-reactid="222">ActionHero generate</code><!-- react-text: 223 --> to create your project, this should already be configured for your.<!-- /react-text --></p><p data-reactid="224"><!-- react-text: 225 -->The majority of the time, you&#x27;ll be testing actions and other methods you have written, so you&#x27;ll need to &quot;run&quot; an actionhero server as part of your test suite.  Many times you&#x27;ll want to have ActionHero behave in a slightly unique way while testing (perhaps connect to a special database, don&#x27;t log, etc).  To do this, you can change the behavior of the config files for the <!-- /react-text --><code data-reactid="226">test</code><!-- react-text: 227 --> environment.  Here is how we tell ActionHero <!-- /react-text --><a href="https://github.com/actionhero/actionhero/blob/master/config/logger.js#L48-L54" data-reactid="228">not to write any logs when testing</a><!-- react-text: 229 -->. Note thest test-specific configuration overrides the defaults.  To ensure that ActionHero boots with the <!-- /react-text --><code data-reactid="230">test</code><!-- react-text: 231 --> environment loaded, the test command you run should explicitly do this, AKA: <!-- /react-text --><code data-reactid="232">NODE_ENV=test ./node_modules/.bin/mocha</code><!-- react-text: 233 -->.  You can log this in as the <!-- /react-text --><a href="https://github.com/actionhero/actionhero/blob/master/package.json#L63" data-reactid="234"><code data-reactid="235">test</code><!-- react-text: 236 --> script in your <!-- /react-text --><code data-reactid="237">package.json</code></a><!-- react-text: 238 --> so you can simplify the running of tests with just <!-- /react-text --><code data-reactid="239">npm test</code><!-- react-text: 240 -->.<!-- /react-text --></p><p data-reactid="241"><!-- react-text: 242 -->ActionHero comes with a <!-- /react-text --><code data-reactid="243">specHelper</code><!-- react-text: 244 --> to make it easier to test tasks and actions.  This specHelper is a special <!-- /react-text --><a href="/docs/core/#servers" data-reactid="245">server</a><!-- react-text: 246 --> which can check things without needing to make an HTTP, websocket, etc request.  If you need to check the true behavior of a server (perhaps how the router works for an HTTP request), you should make a real HTTP request in your test suite, using something like the <!-- /react-text --><a href="https://github.com/request/request" data-reactid="247">request</a><!-- react-text: 248 --> library (<!-- /react-text --><a href="https://github.com/actionhero/actionhero/blob/master/test/servers/web.js#L178-L184" data-reactid="249">example</a><!-- react-text: 250 -->).<!-- /react-text --></p></div></div></div><div data-reactid="251"><br data-reactid="252"/><h2 id="example" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="253"><span style="font-weight:300;font-size:36px;" data-reactid="254">Example Test</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="255"/><div style="font-family:Open Sans, sans-serif;" data-reactid="256"><div data-reactid="257"><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="258"><code data-reactid="259"><span style="color:#999;font-weight:bold;" data-reactid="260"><!-- react-text: 261 -->&#x27;use strict&#x27;<!-- /react-text --></span><!-- react-text: 262 -->

<!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="263"><!-- react-text: 264 -->let<!-- /react-text --></span><!-- react-text: 265 --> path = <!-- /react-text --><span style="color:#0086b3;" data-reactid="266"><!-- react-text: 267 -->require<!-- /react-text --></span><!-- react-text: 268 -->(<!-- /react-text --><span style="color:#d14;" data-reactid="269"><!-- react-text: 270 -->&#x27;path&#x27;<!-- /react-text --></span><!-- react-text: 271 -->)
<!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="272"><!-- react-text: 273 -->var<!-- /react-text --></span><!-- react-text: 274 --> expect = <!-- /react-text --><span style="color:#0086b3;" data-reactid="275"><!-- react-text: 276 -->require<!-- /react-text --></span><!-- react-text: 277 -->(<!-- /react-text --><span style="color:#d14;" data-reactid="278"><!-- react-text: 279 -->&#x27;chai&#x27;<!-- /react-text --></span><!-- react-text: 280 -->).expect
<!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="281"><!-- react-text: 282 -->var<!-- /react-text --></span><!-- react-text: 283 --> ActionheroPrototype = <!-- /react-text --><span style="color:#0086b3;" data-reactid="284"><!-- react-text: 285 -->require<!-- /react-text --></span><!-- react-text: 286 -->(path.join(__dirname, <!-- /react-text --><span style="color:#d14;" data-reactid="287"><!-- react-text: 288 -->&#x27;/../../actionhero.js&#x27;<!-- /react-text --></span><!-- react-text: 289 -->))
<!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="290"><!-- react-text: 291 -->var<!-- /react-text --></span><!-- react-text: 292 --> actionhero = <!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="293"><!-- react-text: 294 -->new<!-- /react-text --></span><!-- react-text: 295 --> ActionheroPrototype()
<!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="296"><!-- react-text: 297 -->var<!-- /react-text --></span><!-- react-text: 298 --> api

describe(<!-- /react-text --><span style="color:#d14;" data-reactid="299"><!-- react-text: 300 -->&#x27;Action: RandomNumber&#x27;<!-- /react-text --></span><!-- react-text: 301 -->, () =&gt; {
  before(<!-- /react-text --><span data-reactid="302"><!-- react-text: 303 -->(<!-- /react-text --><span data-reactid="304"><!-- react-text: 305 -->done<!-- /react-text --></span><!-- react-text: 306 -->) =&gt;<!-- /react-text --></span><!-- react-text: 307 --> {
    actionhero.start(<!-- /react-text --><span data-reactid="308"><!-- react-text: 309 -->(<!-- /react-text --><span data-reactid="310"><!-- react-text: 311 -->error, a<!-- /react-text --></span><!-- react-text: 312 -->) =&gt;<!-- /react-text --></span><!-- react-text: 313 --> {
      expect(error).to.be.null()
      api = a
      done()
    })
  })

  after(<!-- /react-text --><span data-reactid="314"><!-- react-text: 315 -->(<!-- /react-text --><span data-reactid="316"><!-- react-text: 317 -->done<!-- /react-text --></span><!-- react-text: 318 -->) =&gt;<!-- /react-text --></span><!-- react-text: 319 --> {
    actionhero.stop(<!-- /react-text --><span data-reactid="320"><span data-reactid="321"><!-- react-text: 322 -->()<!-- /react-text --></span><!-- react-text: 323 --> =&gt;<!-- /react-text --></span><!-- react-text: 324 --> {
      done()
    })
  })

  <!-- /react-text --><span style="color:#333;font-weight:bold;" data-reactid="325"><!-- react-text: 326 -->var<!-- /react-text --></span><!-- react-text: 327 --> firstNumber = <!-- /react-text --><span style="color:#008080;" data-reactid="328"><!-- react-text: 329 -->null<!-- /react-text --></span><!-- react-text: 330 -->
  it(<!-- /react-text --><span style="color:#d14;" data-reactid="331"><!-- react-text: 332 -->&#x27;generates random numbers&#x27;<!-- /react-text --></span><!-- react-text: 333 -->, (done) =&gt; {
    api.specHelper.runAction(<!-- /react-text --><span style="color:#d14;" data-reactid="334"><!-- react-text: 335 -->&#x27;randomNumber&#x27;<!-- /react-text --></span><!-- react-text: 336 -->, (response) =&gt; {
      expect(response.randomNumber).to.be.at.least(<!-- /react-text --><span style="color:#008080;" data-reactid="337"><!-- react-text: 338 -->0<!-- /react-text --></span><!-- react-text: 339 -->)
      expect(response.randomNumber).to.be.at.most(<!-- /react-text --><span style="color:#008080;" data-reactid="340"><!-- react-text: 341 -->1<!-- /react-text --></span><!-- react-text: 342 -->)
      firstNumber = response.randomNumber
      done()
    })
  })

  it(<!-- /react-text --><span style="color:#d14;" data-reactid="343"><!-- react-text: 344 -->&#x27;is unique / random&#x27;<!-- /react-text --></span><!-- react-text: 345 -->, (done) =&gt; {
    api.specHelper.runAction(<!-- /react-text --><span style="color:#d14;" data-reactid="346"><!-- react-text: 347 -->&#x27;randomNumber&#x27;<!-- /react-text --></span><!-- react-text: 348 -->, (response) =&gt; {
      expect(response.randomNumber).to.be.at.least(<!-- /react-text --><span style="color:#008080;" data-reactid="349"><!-- react-text: 350 -->0<!-- /react-text --></span><!-- react-text: 351 -->)
      expect(response.randomNumber).to.be.at.most(<!-- /react-text --><span style="color:#008080;" data-reactid="352"><!-- react-text: 353 -->1<!-- /react-text --></span><!-- react-text: 354 -->)
      expect(response.randomNumber).not.to.equal(firstNumber)
      done()
    })
  })
})<!-- /react-text --></code></pre><p data-reactid="355"><!-- react-text: 356 -->Say you had an action that was supposed to respond with a <!-- /react-text --><code data-reactid="357">randomNumber</code><!-- react-text: 358 -->, and you wanted to write a test for it.<!-- /react-text --></p><p data-reactid="359">More details on the specHelper methods are below.</p><p data-reactid="360"><!-- react-text: 361 -->If you want to see fuller example of how to create an integration test within ActionHero, please <!-- /react-text --><a href="https://github.com/actionhero/actionhero-tutorial#testing" data-reactid="362">check out the tutorial</a></p></div></div></div><div data-reactid="363"><br data-reactid="364"/><h2 id="test-methods" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="365"><span style="font-weight:300;font-size:36px;" data-reactid="366">Test Methods</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="367"/><div style="font-family:Open Sans, sans-serif;" data-reactid="368"><div data-reactid="369"><h3 data-reactid="370"><code data-reactid="371">new api.specHelper.connection()</code></h3><ul data-reactid="372"><li data-reactid="373"><!-- react-text: 374 -->generate a new connection object for the <!-- /react-text --><code data-reactid="375">testServer</code></li><li data-reactid="376">this connection can run actions, chat, etc.</li><li data-reactid="377"><code data-reactid="378">connection.messages</code><!-- react-text: 379 --> will contain all messages the connection has been sent (welcome messages, action responses, say messages, etc)<!-- /react-text --></li></ul><h3 data-reactid="380"><code data-reactid="381">api.specHelper.runAction(actionName, input, callback)</code></h3><ul data-reactid="382"><li data-reactid="383">use this method to run an action</li><li data-reactid="384"><code data-reactid="385">input</code><!-- react-text: 386 --> can be either a <!-- /react-text --><code data-reactid="387">api.specHelper.connection</code><!-- react-text: 388 --> object, or simply a hash of params, IE: <!-- /react-text --><code data-reactid="389">{key: &#x27;value&#x27;}</code></li><li data-reactid="390"><!-- react-text: 391 -->the callback returns <!-- /react-text --><code data-reactid="392">message</code><!-- react-text: 393 --> and <!-- /react-text --><code data-reactid="394">connection</code><!-- react-text: 395 -->.<!-- /react-text --></li><li data-reactid="396">example use:</li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="397"><code data-reactid="398"><!-- react-text: 399 -->api.specHelper.runAction(<!-- /react-text --><span style="color:#d14;" data-reactid="400"><!-- react-text: 401 -->&#x27;cacheTest&#x27;<!-- /react-text --></span><!-- react-text: 402 -->, {<!-- /react-text --><span data-reactid="403"><!-- react-text: 404 -->key<!-- /react-text --></span><!-- react-text: 405 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="406"><!-- react-text: 407 -->&#x27;key&#x27;<!-- /react-text --></span><!-- react-text: 408 -->, <!-- /react-text --><span data-reactid="409"><!-- react-text: 410 -->value<!-- /react-text --></span><!-- react-text: 411 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="412"><!-- react-text: 413 -->&#x27;value&#x27;<!-- /react-text --></span><!-- react-text: 414 -->}, <!-- /react-text --><span data-reactid="415"><span style="color:#333;font-weight:bold;" data-reactid="416"><!-- react-text: 417 -->function<!-- /react-text --></span><!-- react-text: 418 -->(<!-- /react-text --><span data-reactid="419"><!-- react-text: 420 -->message, connection<!-- /react-text --></span><!-- react-text: 421 -->)<!-- /react-text --></span><!-- react-text: 422 -->{
<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="423"><!-- react-text: 424 -->// message is the normal API response;<!-- /react-text --></span><!-- react-text: 425 -->
<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="426"><!-- react-text: 427 -->// connection is a new connection object<!-- /react-text --></span><!-- react-text: 428 -->
})
<!-- /react-text --></code></pre><h3 data-reactid="429"><code data-reactid="430">api.specHelper.getStaticFile(file, callback)</code></h3><ul data-reactid="431"><li data-reactid="432"><!-- react-text: 433 -->request a file in <!-- /react-text --><code data-reactid="434">/public</code><!-- react-text: 435 --> from the server<!-- /react-text --></li><li data-reactid="436"><!-- react-text: 437 -->the callback returns <!-- /react-text --><code data-reactid="438">message</code><!-- react-text: 439 --> and <!-- /react-text --><code data-reactid="440">connection</code><!-- react-text: 441 --> where <!-- /react-text --><code data-reactid="442">message</code><!-- react-text: 443 --> is a hash:<!-- /react-text --></li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="444"><code data-reactid="445"><span style="color:#333;font-weight:bold;" data-reactid="446"><!-- react-text: 447 -->var<!-- /react-text --></span><!-- react-text: 448 --> message = {
<!-- /react-text --><span data-reactid="449"><!-- react-text: 450 -->error<!-- /react-text --></span><!-- react-text: 451 -->    : error,    <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="452"><!-- react-text: 453 -->// null if everything is OK<!-- /react-text --></span><!-- react-text: 454 -->
content  : (string), <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="455"><!-- react-text: 456 -->// string representation of the file&#x27;s body<!-- /react-text --></span><!-- react-text: 457 -->
mime     : mime,     <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="458"><!-- react-text: 459 -->// file mime<!-- /react-text --></span><!-- react-text: 460 -->
length   : length    <!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="461"><!-- react-text: 462 -->// bytes<!-- /react-text --></span><!-- react-text: 463 -->
}<!-- /react-text --></code></pre><h3 data-reactid="464"><code data-reactid="465">api.specHelper.runTask(taskName, params, callback)</code></h3><ul data-reactid="466"><li data-reactid="467">callback may or may not return anything depending on your task&#x27;s makeup</li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8;" data-reactid="468"><code data-reactid="469"><!-- react-text: 470 -->api.specHelper.runTask(<!-- /react-text --><span style="color:#d14;" data-reactid="471"><!-- react-text: 472 -->&#x27;sendEmailTask&#x27;<!-- /react-text --></span><!-- react-text: 473 -->, {<!-- /react-text --><span data-reactid="474"><!-- react-text: 475 -->message<!-- /react-text --></span><!-- react-text: 476 -->: <!-- /react-text --><span style="color:#d14;" data-reactid="477"><!-- react-text: 478 -->&#x27;hello&#x27;<!-- /react-text --></span><!-- react-text: 479 --> to: <!-- /react-text --><span style="color:#d14;" data-reactid="480"><!-- react-text: 481 -->&#x27;evan@test.com&#x27;<!-- /react-text --></span><!-- react-text: 482 -->}, <!-- /react-text --><span data-reactid="483"><span style="color:#333;font-weight:bold;" data-reactid="484"><!-- react-text: 485 -->function<!-- /react-text --></span><!-- react-text: 486 -->(<!-- /react-text --><span data-reactid="487"><!-- react-text: 488 -->response<!-- /react-text --></span><!-- react-text: 489 -->)<!-- /react-text --></span><!-- react-text: 490 -->{
<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="491"><!-- react-text: 492 -->// test it!<!-- /react-text --></span><!-- react-text: 493 -->
<!-- /react-text --><span style="color:#998;font-style:italic;" data-reactid="494"><!-- react-text: 495 -->// remember that the task really will be run, so be sure that the test environment is set properly<!-- /react-text --></span><!-- react-text: 496 -->
})<!-- /react-text --></code></pre></div></div></div><div data-reactid="497"><br data-reactid="498"/><h2 id="notes" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="499"><span style="font-weight:300;font-size:36px;" data-reactid="500">Notes</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px;" data-reactid="501"/><div style="font-family:Open Sans, sans-serif;" data-reactid="502"><div data-reactid="503"><p data-reactid="504"><!-- react-text: 505 -->Be sure to run your tests in the <!-- /react-text --><code data-reactid="506">test</code><!-- react-text: 507 --> environment, setting the shell&#x27;s env with <!-- /react-text --><code data-reactid="508">NODE_ENV=test</code><!-- react-text: 509 -->.  You can alternatively set this explicitly in your tests with <!-- /react-text --><code data-reactid="510">process.env.NODE_ENV = &#x27;test&#x27;</code></p><p data-reactid="511"><!-- react-text: 512 -->If you do not want the <!-- /react-text --><code data-reactid="513">specHelper</code><!-- react-text: 514 --> actions to include metadata (<!-- /react-text --><code data-reactid="515">data.response.serverInformation</code><!-- react-text: 516 -->, <!-- /react-text --><code data-reactid="517">data.response.requesterInformation</code><!-- react-text: 518 -->, and <!-- /react-text --><code data-reactid="519">data.response.messageCount</code><!-- react-text: 520 -->) from the server, you can configure <!-- /react-text --><code data-reactid="521">api.specHelper.returnMetadata = false</code><!-- react-text: 522 --> in your tests.<!-- /react-text --></p></div></div></div></div></div></div><div class="hidden-xs hidden-sm col-md-3" data-reactid="523"><div style="height:0;" data-reactid="524"><div data-reactid="525"><div data-reactid="526"></div><div style="padding-top:90px;" class="" data-reactid="527"><div data-reactid="528"><!-- react-empty: 529 --><div class="ais-InstantSearch__root" data-reactid="530"><form novalidate="" class="ais-SearchBox__root" action="" role="search" data-reactid="531"><svg xmlns="http://www.w3.org/2000/svg" style="display:none;" data-reactid="532"><symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-search-13" viewBox="0 0 40 40" data-reactid="533"><path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z" fill-rule="evenodd" data-reactid="534"></path></symbol><symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-clear-3" viewBox="0 0 20 20" data-reactid="535"><path d="M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z" fill-rule="evenodd" data-reactid="536"></path></symbol></svg><div role="search" class="ais-SearchBox__wrapper" data-reactid="537"><input type="search" placeholder="Search here…" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" required="" value="" class="ais-SearchBox__input" data-reactid="538"/><button type="submit" title="Submit your search query." class="ais-SearchBox__submit" data-reactid="539"><svg role="img" width="1em" height="1em" data-reactid="540"><use xlink:href="#sbx-icon-search-13" data-reactid="541"></use></svg></button><button type="reset" title="Clear the search query." class="ais-SearchBox__reset" data-reactid="542"><svg role="img" width="1em" height="1em" data-reactid="543"><use xlink:href="#sbx-icon-clear-3" data-reactid="544"></use></svg></button></div></form><div class="ais-Hits__root" data-reactid="545"></div></div><br data-reactid="546"/></div><ul style="list-style-type:none;padding-left:0;margin-left:0;" data-reactid="547"><li data-reactid="548"><a href="#overview" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="549">Overview</a></li><li data-reactid="550"><a href="#get-started" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="551">Getting Started</a></li><li data-reactid="552"><a href="#example" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="553">Example Test</a></li><li data-reactid="554"><a href="#test-methods" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="555">Test Methods</a></li><li data-reactid="556"><a href="#notes" class="text-info" style="font-weight:300;font-size:18px;line-height:1.6em;" data-reactid="557">Notes</a></li></ul><br data-reactid="558"/><ul style="list-style-type:none;padding-left:0;margin-left:0;" data-reactid="559"><div data-reactid="560"><li data-reactid="561"><a style="font-weight:200;color:#E14E3A;" href="/docs/ops/production-notes/" data-reactid="562">» Operations: Production Notes</a></li><li data-reactid="563"><a style="font-weight:200;color:#E14E3A;" href="/docs/ops/development-mode/" data-reactid="564">« Operations: Development Mode &amp; REPL</a></li></div><li data-reactid="565"><a href="#_top" style="font-weight:200;color:#E14E3A;" data-reactid="566">↑ Back to top</a></li></ul></div></div></div></div></div></div><div style="padding-bottom:100px;color:#2F5266;" data-reactid="567"><div class="container" data-reactid="568"><div class="row" data-reactid="569"><div style="text-align:center;" class="col-md-12" data-reactid="570"><hr style="color:#2F5266;background-color:#2F5266;border:0;height:2px;" data-reactid="571"/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="572"><span style="font-weight:400;" data-reactid="573">Up Next</span></h2><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72;" data-reactid="574"><a href="/docs/ops/production-notes/" data-reactid="575">Operations: Production Notes</a></h2></div></div></div></div></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300;" class="container-fluid" data-reactid="576"><footer id="footer-container" style="background-color:#2F5266;color:#FBF9E4;font-family:Roboto, sans-serif;font-weight:200;" data-reactid="577"><div class="container" data-reactid="578"><div style="padding-bottom:50px;padding-top:50px;padding-left:100px;" class="row" data-reactid="579"><div class="col-md-12" data-reactid="580"><img src="/static/images/actionhero-logo-header-wordmark.svg" data-reactid="581"/></div></div><div style="padding-bottom:100px;" class="row" data-reactid="582"><div class="col-md-4" data-reactid="583"><div style="padding-left:100px;" data-reactid="584"><p data-reactid="585"><a style="color:#FBF9E4;" href="/terms/" data-reactid="586">Terms</a></p><p data-reactid="587"><!-- react-text: 588 -->Contact us at <!-- /react-text --><a style="color:#FBF9E4;font-weight:500;" href="mailto:hello@actionherojs.com" data-reactid="589">hello@actionherojs.com</a></p><p data-reactid="590"><a target="_new" style="color:#FBF9E4;" href="https://medium.com/tag/actionherojs/" data-reactid="591">Blogs</a></p><p data-reactid="592"><!-- react-text: 593 -->© 2017<!-- /react-text --><!-- react-text: 594 --> ActionHero<!-- /react-text --></p><p data-reactid="595"><em data-reactid="596"><!-- react-text: 597 -->Search by <!-- /react-text --><a href="https://www.algolia.com" target="_new" data-reactid="598"><!-- react-text: 599 -->Algolia <!-- /react-text --><img style="padding:5px;" width="30" src="/static/images/algolia.svg" data-reactid="600"/></a></em></p></div></div><div class="col-md-4" data-reactid="601"><div style="padding-left:100px;" data-reactid="602"><p data-reactid="603"><a style="color:#FBF9E4;" href="/get-started/" data-reactid="604">Get Started</a></p><p data-reactid="605"><a style="color:#FBF9E4;" href="/docs/" data-reactid="606">Documenation</a></p><p data-reactid="607"><a style="color:#FBF9E4;" href="/solutions/" data-reactid="608">Solutions</a></p><p data-reactid="609"><a style="color:#FBF9E4;" href="/community/" data-reactid="610">Community</a></p><p data-reactid="611"><a style="color:#FBF9E4;" href="/downloads/" data-reactid="612">Downloads</a></p></div></div><div class="col-md-4" data-reactid="613"><div style="padding-left:100px;" data-reactid="614"><p data-reactid="615"><a target="_new" style="color:#FBF9E4;" href="https://www.npmjs.com/package/actionhero/" data-reactid="616">NPM</a></p><p data-reactid="617"><a target="_new" style="color:#FBF9E4;" href="https://twitter.com/actionherojs/" data-reactid="618">Twitter</a></p><p data-reactid="619"><a target="_new" style="color:#FBF9E4;" href="https://slack.actionherojs.com/" data-reactid="620">Slack</a></p><p data-reactid="621"><a target="_new" style="color:#FBF9E4;" href="https://github.com/actionhero/actionhero/" data-reactid="622">Github</a></p></div></div></div></div></footer></div></div></div></div><div id="__next-error"></div></div><div><script>
          __NEXT_DATA__ = {"props":{},"pathname":"/docs/ops/testing","query":{},"buildId":"009e820d-140a-423a-9a90-c778aadab04e","buildStats":{"app.js":{"hash":"517642acd6437ad7e589c92138f402c3"}},"assetPrefix":"","nextExport":true,"err":null,"chunks":[]}
          module={}
          __NEXT_LOADED_PAGES__ = []
          __NEXT_LOADED_CHUNKS__ = []

          __NEXT_REGISTER_PAGE = function (route, fn) {
            __NEXT_LOADED_PAGES__.push({ route: route, fn: fn })
          }

          __NEXT_REGISTER_CHUNK = function (chunkName, fn) {
            __NEXT_LOADED_CHUNKS__.push({ chunkName: chunkName, fn: fn })
          }
        </script><script async="" id="__NEXT_PAGE__/docs/ops/testing" type="text/javascript" src="/_next/009e820d-140a-423a-9a90-c778aadab04e/page/docs/ops/testing/index.js"></script><script async="" id="__NEXT_PAGE__/_error" type="text/javascript" src="/_next/009e820d-140a-423a-9a90-c778aadab04e/page/_error/index.js"></script><div></div><script type="text/javascript" src="/_next/517642acd6437ad7e589c92138f402c3/app.js" async=""></script></div></body></html>