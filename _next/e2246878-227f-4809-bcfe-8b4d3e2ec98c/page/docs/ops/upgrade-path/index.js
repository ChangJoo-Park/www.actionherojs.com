
          window.__NEXT_REGISTER_PAGE('/docs/ops/upgrade-path', function() {
            var comp = module.exports=webpackJsonp([14],{1240:function(e,t,l){e.exports=l(1241)},1241:function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=l(9),o=n(a),r=l(1),u=n(r),c=l(8),i=n(c),d=l(2),s=n(d),m=l(3),f=n(m),h=l(0),g=n(h),E=l(16),p=n(E),v=l(11),y=l(14),b=n(y),w=l(18),k=n(w),T=function(e){function t(e){(0,u.default)(this,t);var l=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return l.state={titleSection:{title:"Operations: Upgrade Path",icon:"/static/images/ops-tools.svg"},sections:{overview:"Overview",v17:"Upgrading from v16 to v17",v16:"Upgrading from v15 to v16",v15:"Upgrading from v14 to v15",v14:"Upgrading from v13 to v14",v13:"Upgrading from v12 to v13",v12:"Upgrading from v11 to v12",v11:"Upgrading from v10 to v11"},links:[{link:"/docs/ops/production-notes",title:"Â« Operations: Production Notes"}]},l}return(0,f.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return g.default.createElement(b.default,{sideNav:this.state.sections,titleSection:this.state.titleSection,links:this.state.links,currentSection:this.state.currentSection},g.default.createElement(v.Row,null,g.default.createElement(v.Col,{md:12},this.section("overview",g.default.createElement("div",null,g.default.createElement("p",null,"Upgrading big ActionHero projects to a new major might require some effort. Every ActionHero version has it's own specific project files which you generate using ",g.default.createElement("code",null,"actionhero generate")," command. One of the ways to upgrade your project is to generate a new project using the latest ActionHero framework (",g.default.createElement("code",null,"npm install actionhero && ./node_modules/.bin/actionhero generate"),"). Using that as your starting point you can then carefully copy all your ",g.default.createElement("code",null,"configs"),", ",g.default.createElement("code",null,"initializers"),", ",g.default.createElement("code",null,"servers"),", links and other custom code from your old project, making sure that you are at the same working state as before. It's a good practice to make tests for your actions (or any other component) before you plan to upgrade your ActionHero project."),g.default.createElement("p",null,"With good ",g.default.createElement("a",{href:"/docs/ops/testing"},"test coverage")," you can make sure that you have successfully upgraded your project."),g.default.createElement("p",null,"ActionHero follows ",g.default.createElement("a",{href:"http://semver.org/"},"semantic versioning"),".  This means that a minor change is a right-most number.  A new feature added is the middle number, and a breaking change is the left number.  You should expect something in your application to need to be changed if you upgrade a major version."))),this.section("v17",g.default.createElement("div",null,g.default.createElement("p",null,g.default.createElement("strong",null,"Full Release Notes: ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v17.0.0"},"GitHub"))),g.default.createElement("p",null,g.default.createElement("strong",null,"Breaking Changes and How to Overcome Them:")),g.default.createElement("ul",null,g.default.createElement("li",null,g.default.createElement("strong",null,"Localization (i18n)")),g.default.createElement("ul",null,g.default.createElement("li",null,"In ",g.default.createElement("code",null,"./config/i18n.js")," be sure to enable ",g.default.createElement("code",null,"objectNotation"),", or else the new locale file will be gibberish to ActionHero"),g.default.createElement("li",null,"As of this release, ActionHero no longer localizes its log messages.  This is done to simplify and speed up the logger methods.  There is not mitigation path here without overwriting the ",g.default.createElement("code",null,"api.log()")," method."),g.default.createElement("ul",null,g.default.createElement("li",null,"Any use of ",g.default.createElement("code",null,"%")," interpolation should be removed from your logger strings.  Favor native JS string templates.")),g.default.createElement("li",null,"ActionHero now ships with locale files by default."),g.default.createElement("ul",null,g.default.createElement("li",null,"You will need to acquire the ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/blob/master/locales/en.json"},"default locale file")," and copy it into ",g.default.createElement("code",null,"./locales/en.json")," within your project."),g.default.createElement("li",null,"The error reporters have all been changed to use these new locale file and mustache-style syntax.  Update your from the ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/blob/master/config/errors.js"},"default errors file")),g.default.createElement("li",null,"The ",g.default.createElement("code",null,"welcomeMessage")," and ",g.default.createElement("code",null,"goodbyeMessage")," are removed from the config files and ActionHero now refrences the locale files for these strings.  Update yours accodingly."))),g.default.createElement("li",null,g.default.createElement("strong",null,"utils")),g.default.createElement("ul",null,g.default.createElement("li",null,g.default.createElement("code",null,"api.utils.recursiveDirectoryGlob")," has been removed in favor of the ",g.default.createElement("a",{href:"https://github.com/isaacs/node-glob"},"glob package"),".  Use this instead."))))),this.section("v16",g.default.createElement("div",null,g.default.createElement("p",null,g.default.createElement("strong",null,"Full Release Notes: ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v16.0.0"},"GitHub"))),g.default.createElement("p",null,g.default.createElement("strong",null,"Breaking Changes and How to Overcome Them:")),g.default.createElement("p",null,"The only breaking changes are related to the capilization of internal methods:"),g.default.createElement("ul",null,g.default.createElement("li",null,g.default.createElement("code",null,"api.Connecton()")," rather than ",g.default.createElement("code",null,"api.connection()")),g.default.createElement("li",null,g.default.createElement("code",null,"api.GenericServer()")," rather than ",g.default.createElement("code",null,"api.genericServer()")),g.default.createElement("li",null,g.default.createElement("code",null,"api.ActionProcessor()")," rather than ",g.default.createElement("code",null,"api.actionProcessor()")),g.default.createElement("li",null,g.default.createElement("code",null,"require('actionhero')")," not ",g.default.createElement("code",null,"require('actionhero').actionheroPrototype")," should you be using ActionHero programatically.")))),this.section("v15",g.default.createElement("div",null,g.default.createElement("p",null,g.default.createElement("strong",null,"Full Release Notes: ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v15.0.0"},"GitHub"))),g.default.createElement("p",null,g.default.createElement("strong",null,"Breaking Changes and How to Overcome Them:")),g.default.createElement(k.default,{language:"bash"},"`actionhero generateAction --name=[name]`      -> `actionhero generate action --name=[name]`\n`actionhero generateInitializer --name=[name]` -> `actionhero generate initializer --name=[name]`\n`actionhero generateServer --name=[name]`      -> `actionhero generate server --name=[name]`\n`actionhero generateTask --name=[name]`        -> `actionhero generate task --name=[name]`\n"),g.default.createElement("ul",null,g.default.createElement("li",null,"The ActionHero binary has had it's commands changed.",g.default.createElement("ul",null,g.default.createElement("li",null,"Any deployment or automation tools you use will need to be updated accordingly."))),g.default.createElement("li",null,"Tasks now use middleware instead of plugins.",g.default.createElement("ul",null,g.default.createElement("li",null,"You will need to convert all uses of task plugins to task middleware.")))))),this.section("v14",g.default.createElement("div",null,g.default.createElement("p",null,g.default.createElement("strong",null,"Full Release Notes: ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v14.0.0"},"GitHub"))),g.default.createElement("p",null,g.default.createElement("strong",null,"Breaking Changes and How to Overcome Them:")),g.default.createElement("ul",null,g.default.createElement("li",null,"Redis Client Configurations have changed drastically.  This allows for greater configuration, but at a complexity cost.",g.default.createElement("ul",null,g.default.createElement("li",null,"The easiest way to upgrade your ",g.default.createElement("code",null,"config/redis.js")," is to take if from the ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/blob/master/config/redis.js"},"master branch")," directly and re-apply your configuration."),g.default.createElement("li",null,"Move ",g.default.createElement("code",null,"api.config.redis.channel")," to ",g.default.createElement("code",null,"api.config.general.channel")),g.default.createElement("li",null,"Move ",g.default.createElement("code",null,"api.config.redis. rpcTimeout")," to ",g.default.createElement("code",null,"api.config.general.rpcTimeout")),g.default.createElement("li",null,"Throughout the code, use ",g.default.createElement("code",null,"api.config.redis.client")," rather than ",g.default.createElement("code",null,"api.redis.client"))))))),this.section("v13",g.default.createElement("div",null,g.default.createElement("p",null,g.default.createElement("strong",null,"Full Release Notes: ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v13.0.0"},"GitHub"))),g.default.createElement("p",null,g.default.createElement("strong",null,"Breaking Changes and How to Overcome Them:")),g.default.createElement("ul",null,g.default.createElement("li",null,"Pluggins",g.default.createElement("ul",null,g.default.createElement("li",null,g.default.createElement("code",null,"config/plugins.js")," is removed.  Delete yours."),g.default.createElement("li",null,"Use the new binary command, ",g.default.createElement("code",null,"actionhero link --name=NameOfPlugin")," to link your plugins in the new method."),g.default.createElement("li",null,"Linking plugins will likley create new config files you may need to customize."))),g.default.createElement("li",null,"Locales",g.default.createElement("ul",null,g.default.createElement("li",null,"This release introduced Locales. You will need the new locale config file.  The easiest way to upgrade your ",g.default.createElement("code",null,"config/i18n.js")," is to take if from the ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/blob/master/config/i18n.js"},"master branch"),"."),g.default.createElement("li",null,"Ensure that ",g.default.createElement("code",null,"api.config.i18n.updateFiles")," is ",g.default.createElement("code",null,"true")," so that your locale files can be generated for the first time."))),g.default.createElement("li",null,"Errors",g.default.createElement("ul",null,g.default.createElement("li",null,g.default.createElement("code",null,"config/errors.js")," has been completely redone to take advantage of ",g.default.createElement("code",null,"connection.localize"),".  The easiest way to upgrade your ",g.default.createElement("code",null,"config/errors.js")," is to take if from the ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/blob/master/config/errors.js"},"master branch"),"."))),g.default.createElement("li",null,"Grunt Removed",g.default.createElement("ul",null,g.default.createElement("li",null,"Grunt is removed from the project.  The old ActionHero grunt commands have been moved into the ActionHero binary."))),g.default.createElement("li",null,"Redis configuration",g.default.createElement("ul",null,g.default.createElement("li",null,g.default.createElement("code",null,"package")," is a reserved keyword in JavaScript.  We now use the key ",g.default.createElement("code",null,"pkg")," in the redis config.")))))),this.section("v12",g.default.createElement("div",null,g.default.createElement("p",null,g.default.createElement("strong",null,"Full Release Notes: ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v12.0.0"},"GitHub"))),g.default.createElement("p",null,g.default.createElement("strong",null,"Breaking Changes and How to Overcome Them:")),g.default.createElement("ul",null,g.default.createElement("li",null,"Redis configuration",g.default.createElement("ul",null,g.default.createElement("li",null,"Switch from using the ",g.default.createElement("code",null,"redis")," npm pacakge to ",g.default.createElement("code",null,"ioredis"),".  Change this in your package.json."))),g.default.createElement("li",null,g.default.createElement("code",null,"ioredis")," handles passwords slightly differently.  Read the ",g.default.createElement("a",{href:"https://github.com/luin/ioredis"},"ioredis")," documentation to learn more."),g.default.createElement("li",null,"Stats Removed",g.default.createElement("ul",null,g.default.createElement("li",null,"The ",g.default.createElement("code",null,"api.stats")," subsection has been removed from actionhero"),g.default.createElement("li",null,"If you need the stats subsection, you can get get it ",g.default.createElement("a",{href:"https://github.com/actionhero/ah-stats-plugin"},"via plugin"))))))),this.section("v11",g.default.createElement("div",null,g.default.createElement("p",null,g.default.createElement("strong",null,"Full Release Notes: ",g.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v11.0.0"},"GitHub"))),g.default.createElement("p",null,g.default.createElement("strong",null,"Breaking Changes and How to Overcome Them:")),g.default.createElement("ul",null,g.default.createElement("li",null,"Action Syntax changed",g.default.createElement("ul",null,g.default.createElement("li",null,g.default.createElement(k.default,null,"run: function(api, data, next){\n  data.response.randomNumber = Math.random();\n  next(error);\n}")),g.default.createElement("li",null,"Where data contains:"),g.default.createElement("li",null,g.default.createElement(k.default,null,"data = {\n  connection: connection,\n  action: 'randomNumber',\n  toProcess: true,\n  toRender: true,\n  messageCount: 123,\n  params: { action: 'randomNumber', apiVersion: 1 },\n  actionStartTime: 123,\n  response: {},\n}")),g.default.createElement("li",null,"You will need to change all of your actions to use ",g.default.createElement("code",null,"data.connection")," rather than ",g.default.createElement("code",null,"connection")," directly."),g.default.createElement("li",null,"You will need to change all of your actions to use ",g.default.createElement("code",null,"data.response")," rather than ",g.default.createElement("code",null,"connection.response")," directly."))),g.default.createElement("li",null,"Middleware syntax has changed to match action's ",g.default.createElement("code",null,"data")," pattern.  You will need to change your middleware accordingly."),g.default.createElement("li",null,"Removed ",g.default.createElement("code",null,"connection._originalConnection"),"."),g.default.createElement("li",null,"Websockets:",g.default.createElement("ul",null,g.default.createElement("li",null,"The params of websocket connections should NOT be sticky. All actions will start with ",g.default.createElement("code",null,"connection.params = "),".  If you rely on the old behavior, you will need to change your client code."))),g.default.createElement("li",null,"Action Processor:",g.default.createElement("ul",null,g.default.createElement("li",null,"Removed duplicate callback prevention in ActionProcessor. This belongs on the user/implementer to handle.")))))))))}}]),t}(p.default);t.default=T}},[1240]);
            return { page: comp.default }
          })
        