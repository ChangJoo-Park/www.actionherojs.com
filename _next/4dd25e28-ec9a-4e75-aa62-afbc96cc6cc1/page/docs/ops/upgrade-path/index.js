
          window.__NEXT_REGISTER_PAGE('/docs/ops/upgrade-path', function() {
            var comp = module.exports=webpackJsonp([14],{1243:function(e,t,l){e.exports=l(1244)},1244:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=l(9),i=a(r),n=l(1),o=a(n),u=l(8),m=a(u),c=l(2),s=a(c),f=l(3),d=a(f),N="/home/ubuntu/www.actionherojs.com/pages/docs/ops/upgrade-path.js?entry",_=l(0),b=a(_),h=l(16),g=a(h),E=l(11),p=l(14),v=a(p),y=l(18),w=a(y),k=function(e){function t(e){(0,o.default)(this,t);var l=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return l.state={titleSection:{title:"Operations: Upgrade Path",icon:"/static/images/ops-tools.svg"},sections:{overview:"Overview",v17:"Upgrading from v16 to v17",v16:"Upgrading from v15 to v16",v15:"Upgrading from v14 to v15",v14:"Upgrading from v13 to v14",v13:"Upgrading from v12 to v13",v12:"Upgrading from v11 to v12",v11:"Upgrading from v10 to v11"},links:[{link:"/docs/ops/production-notes",title:"Â« Operations: Production Notes"}]},l}return(0,d.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){return b.default.createElement(v.default,{sideNav:this.state.sections,titleSection:this.state.titleSection,links:this.state.links,currentSection:this.state.currentSection,__source:{fileName:N,lineNumber:60}},b.default.createElement(E.Row,{__source:{fileName:N,lineNumber:61}},b.default.createElement(E.Col,{md:12,__source:{fileName:N,lineNumber:62}},this.section("overview",b.default.createElement("div",{__source:{fileName:N,lineNumber:64}},b.default.createElement("p",{__source:{fileName:N,lineNumber:65}},"Upgrading big ActionHero projects to a new major might require some effort. Every ActionHero version has it's own specific project files which you generate using ",b.default.createElement("code",{__source:{fileName:N,lineNumber:65}},"actionhero generate")," command. One of the ways to upgrade your project is to generate a new project using the latest ActionHero framework (",b.default.createElement("code",{__source:{fileName:N,lineNumber:65}},"npm install actionhero && ./node_modules/.bin/actionhero generate"),"). Using that as your starting point you can then carefully copy all your ",b.default.createElement("code",{__source:{fileName:N,lineNumber:65}},"configs"),", ",b.default.createElement("code",{__source:{fileName:N,lineNumber:65}},"initializers"),", ",b.default.createElement("code",{__source:{fileName:N,lineNumber:65}},"servers"),", links and other custom code from your old project, making sure that you are at the same working state as before. It's a good practice to make tests for your actions (or any other component) before you plan to upgrade your ActionHero project."),b.default.createElement("p",{__source:{fileName:N,lineNumber:66}},"With good ",b.default.createElement("a",{href:"/docs/ops/testing",__source:{fileName:N,lineNumber:66}},"test coverage")," you can make sure that you have successfully upgraded your project."),b.default.createElement("p",{__source:{fileName:N,lineNumber:67}},"ActionHero follows ",b.default.createElement("a",{href:"http://semver.org/",__source:{fileName:N,lineNumber:67}},"semantic versioning"),".  This means that a minor change is a right-most number.  A new feature added is the middle number, and a breaking change is the left number.  You should expect something in your application to need to be changed if you upgrade a major version."))),this.section("v17",b.default.createElement("div",{__source:{fileName:N,lineNumber:72}},b.default.createElement("p",{__source:{fileName:N,lineNumber:73}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:73}},"Full Release Notes: ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v17.0.0",__source:{fileName:N,lineNumber:73}},"GitHub"))),b.default.createElement("p",{__source:{fileName:N,lineNumber:75}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:75}},"Breaking Changes and How to Overcome Them:")),b.default.createElement("ul",{__source:{fileName:N,lineNumber:77}},b.default.createElement("li",{__source:{fileName:N,lineNumber:78}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:78}},"Localization (i18n)")),b.default.createElement("ul",{__source:{fileName:N,lineNumber:79}},b.default.createElement("li",{__source:{fileName:N,lineNumber:80}},"In ",b.default.createElement("code",{__source:{fileName:N,lineNumber:80}},"./config/i18n.js")," be sure to enable ",b.default.createElement("code",{__source:{fileName:N,lineNumber:80}},"objectNotation"),", or else the new locale file will be gibberish to ActionHero"),b.default.createElement("li",{__source:{fileName:N,lineNumber:81}},"As of this release, ActionHero no longer localizes its log messages.  This is done to simplify and speed up the logger methods.  There is not mitigation path here without overwriting the ",b.default.createElement("code",{__source:{fileName:N,lineNumber:81}},"api.log()")," method."),b.default.createElement("ul",{__source:{fileName:N,lineNumber:82}},b.default.createElement("li",{__source:{fileName:N,lineNumber:83}},"Any use of ",b.default.createElement("code",{__source:{fileName:N,lineNumber:83}},"%")," interpolation should be removed from your logger strings.  Favor native JS string templates.")),b.default.createElement("li",{__source:{fileName:N,lineNumber:85}},"ActionHero now ships with locale files by default."),b.default.createElement("ul",{__source:{fileName:N,lineNumber:86}},b.default.createElement("li",{__source:{fileName:N,lineNumber:87}},"You will need to acquire the ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/blob/master/locales/en.json",__source:{fileName:N,lineNumber:87}},"default locale file")," and copy it into ",b.default.createElement("code",{__source:{fileName:N,lineNumber:87}},"./locales/en.json")," within your project."),b.default.createElement("li",{__source:{fileName:N,lineNumber:88}},"The error reporters have all been changed to use these new locale file and mustache-style syntax.  Update your from the ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/blob/master/config/errors.js",__source:{fileName:N,lineNumber:88}},"default errors file")),b.default.createElement("li",{__source:{fileName:N,lineNumber:89}},"The ",b.default.createElement("code",{__source:{fileName:N,lineNumber:89}},"welcomeMessage")," and ",b.default.createElement("code",{__source:{fileName:N,lineNumber:89}},"goodbyeMessage")," are removed from the config files and ActionHero now refrences the locale files for these strings.  Update yours accodingly."))),b.default.createElement("li",{__source:{fileName:N,lineNumber:92}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:92}},"utils")),b.default.createElement("ul",{__source:{fileName:N,lineNumber:93}},b.default.createElement("li",{__source:{fileName:N,lineNumber:94}},b.default.createElement("code",{__source:{fileName:N,lineNumber:94}},"api.utils.recursiveDirectoryGlob")," has been removed in favor of the ",b.default.createElement("a",{href:"https://github.com/isaacs/node-glob",__source:{fileName:N,lineNumber:94}},"glob package"),".  Use this instead."))))),this.section("v16",b.default.createElement("div",{__source:{fileName:N,lineNumber:101}},b.default.createElement("p",{__source:{fileName:N,lineNumber:102}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:102}},"Full Release Notes: ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v16.0.0",__source:{fileName:N,lineNumber:102}},"GitHub"))),b.default.createElement("p",{__source:{fileName:N,lineNumber:103}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:103}},"Breaking Changes and How to Overcome Them:")),b.default.createElement("p",{__source:{fileName:N,lineNumber:105}},"The only breaking changes are related to the capilization of internal methods:"),b.default.createElement("ul",{__source:{fileName:N,lineNumber:107}},b.default.createElement("li",{__source:{fileName:N,lineNumber:108}},b.default.createElement("code",{__source:{fileName:N,lineNumber:108}},"api.Connecton()")," rather than ",b.default.createElement("code",{__source:{fileName:N,lineNumber:108}},"api.connection()")),b.default.createElement("li",{__source:{fileName:N,lineNumber:109}},b.default.createElement("code",{__source:{fileName:N,lineNumber:109}},"api.GenericServer()")," rather than ",b.default.createElement("code",{__source:{fileName:N,lineNumber:109}},"api.genericServer()")),b.default.createElement("li",{__source:{fileName:N,lineNumber:110}},b.default.createElement("code",{__source:{fileName:N,lineNumber:110}},"api.ActionProcessor()")," rather than ",b.default.createElement("code",{__source:{fileName:N,lineNumber:110}},"api.actionProcessor()")),b.default.createElement("li",{__source:{fileName:N,lineNumber:111}},b.default.createElement("code",{__source:{fileName:N,lineNumber:111}},"require('actionhero')")," not ",b.default.createElement("code",{__source:{fileName:N,lineNumber:111}},"require('actionhero').actionheroPrototype")," should you be using ActionHero programatically.")))),this.section("v15",b.default.createElement("div",{__source:{fileName:N,lineNumber:117}},b.default.createElement("p",{__source:{fileName:N,lineNumber:118}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:118}},"Full Release Notes: ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v15.0.0",__source:{fileName:N,lineNumber:118}},"GitHub"))),b.default.createElement("p",{__source:{fileName:N,lineNumber:119}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:119}},"Breaking Changes and How to Overcome Them:")),b.default.createElement(w.default,{language:"bash",__source:{fileName:N,lineNumber:120}},"`actionhero generateAction --name=[name]`      -> `actionhero generate action --name=[name]`\n`actionhero generateInitializer --name=[name]` -> `actionhero generate initializer --name=[name]`\n`actionhero generateServer --name=[name]`      -> `actionhero generate server --name=[name]`\n`actionhero generateTask --name=[name]`        -> `actionhero generate task --name=[name]`\n"),b.default.createElement("ul",{__source:{fileName:N,lineNumber:121}},b.default.createElement("li",{__source:{fileName:N,lineNumber:122}},"The ActionHero binary has had it's commands changed.",b.default.createElement("ul",{__source:{fileName:N,lineNumber:123}},b.default.createElement("li",{__source:{fileName:N,lineNumber:124}},"Any deployment or automation tools you use will need to be updated accordingly."))),b.default.createElement("li",{__source:{fileName:N,lineNumber:127}},"Tasks now use middleware instead of plugins.",b.default.createElement("ul",{__source:{fileName:N,lineNumber:128}},b.default.createElement("li",{__source:{fileName:N,lineNumber:129}},"You will need to convert all uses of task plugins to task middleware.")))))),this.section("v14",b.default.createElement("div",{__source:{fileName:N,lineNumber:137}},b.default.createElement("p",{__source:{fileName:N,lineNumber:138}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:138}},"Full Release Notes: ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v14.0.0",__source:{fileName:N,lineNumber:138}},"GitHub"))),b.default.createElement("p",{__source:{fileName:N,lineNumber:139}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:139}},"Breaking Changes and How to Overcome Them:")),b.default.createElement("ul",{__source:{fileName:N,lineNumber:140}},b.default.createElement("li",{__source:{fileName:N,lineNumber:141}},"Redis Client Configurations have changed drastically.  This allows for greater configuration, but at a complexity cost.",b.default.createElement("ul",{__source:{fileName:N,lineNumber:142}},b.default.createElement("li",{__source:{fileName:N,lineNumber:143}},"The easiest way to upgrade your ",b.default.createElement("code",{__source:{fileName:N,lineNumber:143}},"config/redis.js")," is to take if from the ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/blob/master/config/redis.js",__source:{fileName:N,lineNumber:143}},"master branch")," directly and re-apply your configuration."),b.default.createElement("li",{__source:{fileName:N,lineNumber:144}},"Move ",b.default.createElement("code",{__source:{fileName:N,lineNumber:144}},"api.config.redis.channel")," to ",b.default.createElement("code",{__source:{fileName:N,lineNumber:144}},"api.config.general.channel")),b.default.createElement("li",{__source:{fileName:N,lineNumber:145}},"Move ",b.default.createElement("code",{__source:{fileName:N,lineNumber:145}},"api.config.redis. rpcTimeout")," to ",b.default.createElement("code",{__source:{fileName:N,lineNumber:145}},"api.config.general.rpcTimeout")),b.default.createElement("li",{__source:{fileName:N,lineNumber:146}},"Throughout the code, use ",b.default.createElement("code",{__source:{fileName:N,lineNumber:146}},"api.config.redis.client")," rather than ",b.default.createElement("code",{__source:{fileName:N,lineNumber:146}},"api.redis.client"))))))),this.section("v13",b.default.createElement("div",{__source:{fileName:N,lineNumber:154}},b.default.createElement("p",{__source:{fileName:N,lineNumber:155}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:155}},"Full Release Notes: ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v13.0.0",__source:{fileName:N,lineNumber:155}},"GitHub"))),b.default.createElement("p",{__source:{fileName:N,lineNumber:156}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:156}},"Breaking Changes and How to Overcome Them:")),b.default.createElement("ul",{__source:{fileName:N,lineNumber:158}},b.default.createElement("li",{__source:{fileName:N,lineNumber:159}},"Pluggins",b.default.createElement("ul",{__source:{fileName:N,lineNumber:160}},b.default.createElement("li",{__source:{fileName:N,lineNumber:161}},b.default.createElement("code",{__source:{fileName:N,lineNumber:161}},"config/plugins.js")," is removed.  Delete yours."),b.default.createElement("li",{__source:{fileName:N,lineNumber:162}},"Use the new binary command, ",b.default.createElement("code",{__source:{fileName:N,lineNumber:162}},"actionhero link --name=NameOfPlugin")," to link your plugins in the new method."),b.default.createElement("li",{__source:{fileName:N,lineNumber:163}},"Linking plugins will likley create new config files you may need to customize."))),b.default.createElement("li",{__source:{fileName:N,lineNumber:166}},"Locales",b.default.createElement("ul",{__source:{fileName:N,lineNumber:167}},b.default.createElement("li",{__source:{fileName:N,lineNumber:168}},"This release introduced Locales. You will need the new locale config file.  The easiest way to upgrade your ",b.default.createElement("code",{__source:{fileName:N,lineNumber:168}},"config/i18n.js")," is to take if from the ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/blob/master/config/i18n.js",__source:{fileName:N,lineNumber:168}},"master branch"),"."),b.default.createElement("li",{__source:{fileName:N,lineNumber:169}},"Ensure that ",b.default.createElement("code",{__source:{fileName:N,lineNumber:169}},"api.config.i18n.updateFiles")," is ",b.default.createElement("code",{__source:{fileName:N,lineNumber:169}},"true")," so that your locale files can be generated for the first time."))),b.default.createElement("li",{__source:{fileName:N,lineNumber:172}},"Errors",b.default.createElement("ul",{__source:{fileName:N,lineNumber:173}},b.default.createElement("li",{__source:{fileName:N,lineNumber:174}},b.default.createElement("code",{__source:{fileName:N,lineNumber:174}},"config/errors.js")," has been completely redone to take advantage of ",b.default.createElement("code",{__source:{fileName:N,lineNumber:174}},"connection.localize"),".  The easiest way to upgrade your ",b.default.createElement("code",{__source:{fileName:N,lineNumber:174}},"config/errors.js")," is to take if from the ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/blob/master/config/errors.js",__source:{fileName:N,lineNumber:174}},"master branch"),"."))),b.default.createElement("li",{__source:{fileName:N,lineNumber:177}},"Grunt Removed",b.default.createElement("ul",{__source:{fileName:N,lineNumber:178}},b.default.createElement("li",{__source:{fileName:N,lineNumber:179}},"Grunt is removed from the project.  The old ActionHero grunt commands have been moved into the ActionHero binary."))),b.default.createElement("li",{__source:{fileName:N,lineNumber:182}},"Redis configuration",b.default.createElement("ul",{__source:{fileName:N,lineNumber:183}},b.default.createElement("li",{__source:{fileName:N,lineNumber:184}},b.default.createElement("code",{__source:{fileName:N,lineNumber:184}},"package")," is a reserved keyword in JavaScript.  We now use the key ",b.default.createElement("code",{__source:{fileName:N,lineNumber:184}},"pkg")," in the redis config.")))))),this.section("v12",b.default.createElement("div",{__source:{fileName:N,lineNumber:192}},b.default.createElement("p",{__source:{fileName:N,lineNumber:193}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:193}},"Full Release Notes: ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v12.0.0",__source:{fileName:N,lineNumber:193}},"GitHub"))),b.default.createElement("p",{__source:{fileName:N,lineNumber:194}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:194}},"Breaking Changes and How to Overcome Them:")),b.default.createElement("ul",{__source:{fileName:N,lineNumber:196}},b.default.createElement("li",{__source:{fileName:N,lineNumber:197}},"Redis configuration",b.default.createElement("ul",{__source:{fileName:N,lineNumber:198}},b.default.createElement("li",{__source:{fileName:N,lineNumber:199}},"Switch from using the ",b.default.createElement("code",{__source:{fileName:N,lineNumber:199}},"redis")," npm pacakge to ",b.default.createElement("code",{__source:{fileName:N,lineNumber:199}},"ioredis"),".  Change this in your package.json."))),b.default.createElement("li",{__source:{fileName:N,lineNumber:202}},b.default.createElement("code",{__source:{fileName:N,lineNumber:202}},"ioredis")," handles passwords slightly differently.  Read the ",b.default.createElement("a",{href:"https://github.com/luin/ioredis",__source:{fileName:N,lineNumber:202}},"ioredis")," documentation to learn more."),b.default.createElement("li",{__source:{fileName:N,lineNumber:203}},"Stats Removed",b.default.createElement("ul",{__source:{fileName:N,lineNumber:204}},b.default.createElement("li",{__source:{fileName:N,lineNumber:205}},"The ",b.default.createElement("code",{__source:{fileName:N,lineNumber:205}},"api.stats")," subsection has been removed from actionhero"),b.default.createElement("li",{__source:{fileName:N,lineNumber:206}},"If you need the stats subsection, you can get get it ",b.default.createElement("a",{href:"https://github.com/actionhero/ah-stats-plugin",__source:{fileName:N,lineNumber:206}},"via plugin"))))))),this.section("v11",b.default.createElement("div",{__source:{fileName:N,lineNumber:214}},b.default.createElement("p",{__source:{fileName:N,lineNumber:215}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:215}},"Full Release Notes: ",b.default.createElement("a",{href:"https://github.com/actionhero/actionhero/releases/tag/v11.0.0",__source:{fileName:N,lineNumber:215}},"GitHub"))),b.default.createElement("p",{__source:{fileName:N,lineNumber:216}},b.default.createElement("strong",{__source:{fileName:N,lineNumber:216}},"Breaking Changes and How to Overcome Them:")),b.default.createElement("ul",{__source:{fileName:N,lineNumber:218}},b.default.createElement("li",{__source:{fileName:N,lineNumber:219}},"Action Syntax changed",b.default.createElement("ul",{__source:{fileName:N,lineNumber:220}},b.default.createElement("li",{__source:{fileName:N,lineNumber:221}},b.default.createElement(w.default,{__source:{fileName:N,lineNumber:221}},"run: function(api, data, next){\n  data.response.randomNumber = Math.random();\n  next(error);\n}")),b.default.createElement("li",{__source:{fileName:N,lineNumber:222}},"Where data contains:"),b.default.createElement("li",{__source:{fileName:N,lineNumber:223}},b.default.createElement(w.default,{__source:{fileName:N,lineNumber:223}},"data = {\n  connection: connection,\n  action: 'randomNumber',\n  toProcess: true,\n  toRender: true,\n  messageCount: 123,\n  params: { action: 'randomNumber', apiVersion: 1 },\n  actionStartTime: 123,\n  response: {},\n}")),b.default.createElement("li",{__source:{fileName:N,lineNumber:224}},"You will need to change all of your actions to use ",b.default.createElement("code",{__source:{fileName:N,lineNumber:224}},"data.connection")," rather than ",b.default.createElement("code",{__source:{fileName:N,lineNumber:224}},"connection")," directly."),b.default.createElement("li",{__source:{fileName:N,lineNumber:225}},"You will need to change all of your actions to use ",b.default.createElement("code",{__source:{fileName:N,lineNumber:225}},"data.response")," rather than ",b.default.createElement("code",{__source:{fileName:N,lineNumber:225}},"connection.response")," directly."))),b.default.createElement("li",{__source:{fileName:N,lineNumber:228}},"Middleware syntax has changed to match action's ",b.default.createElement("code",{__source:{fileName:N,lineNumber:228}},"data")," pattern.  You will need to change your middleware accordingly."),b.default.createElement("li",{__source:{fileName:N,lineNumber:229}},"Removed ",b.default.createElement("code",{__source:{fileName:N,lineNumber:229}},"connection._originalConnection"),"."),b.default.createElement("li",{__source:{fileName:N,lineNumber:230}},"Websockets:",b.default.createElement("ul",{__source:{fileName:N,lineNumber:231}},b.default.createElement("li",{__source:{fileName:N,lineNumber:232}},"The params of websocket connections should NOT be sticky. All actions will start with ",b.default.createElement("code",{__source:{fileName:N,lineNumber:232}},"connection.params = "),".  If you rely on the old behavior, you will need to change your client code."))),b.default.createElement("li",{__source:{fileName:N,lineNumber:235}},"Action Processor:",b.default.createElement("ul",{__source:{fileName:N,lineNumber:236}},b.default.createElement("li",{__source:{fileName:N,lineNumber:237}},"Removed duplicate callback prevention in ActionProcessor. This belongs on the user/implementer to handle.")))))))))}}]),t}(g.default);t.default=k}},[1243]);
            return { page: comp.default }
          })
        